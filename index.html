<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0">
    <title>Siber Macera - Siber Güvenlik Oyunu</title>
    <meta name="description" content="Siber güvenlik konularında eğlenceli ve öğretici oyun. Parola güvenliği, sosyal mühendislik ve oltalama saldırıları hakkında öğrenin.">
    <meta name="keywords" content="siber güvenlik, oyun, eğitim, parola, güvenlik, oltalama, phishing">
    <meta name="author" content="Siber Güvenlik Başkanlığı">
    <meta name="robots" content="index, follow">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#0a1428">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Siber Macera">
    <meta name="application-name" content="Siber Macera">
    
    <!-- Kiosk Mode Meta Tags -->
    <meta name="kiosk-enabled" content="true">
    <meta name="fullscreen" content="yes">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="./manifest.json">
    
    <!-- Icons for different devices -->
    <link rel="icon" href="./assets/favicon.ico" sizes="any">
    <link rel="icon" href="./assets/icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="./assets/apple-touch-icon.png">
    
    <!-- Font preload for faster loading - Commented out to avoid CORS issues -->
    <!-- <link rel="preload" href="fonts/Gilmer Regular.otf" as="font" type="font/otf" crossorigin>
    <link rel="preload" href="fonts/Gilmer Light.otf" as="font" type="font/otf" crossorigin>
    <link rel="preload" href="fonts/Gilmer Bold.otf" as="font" type="font/otf" crossorigin>
    <link rel="preload" href="fonts/conthrax-sb.otf" as="font" type="font/otf" crossorigin> -->
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="style.css?v=9.0&t=1735683000&cache=bust&mobile=fix&iphone12=final&buttons=tight">
    
    <!-- MOBIL CSS - SUPER GÜÇLÜ -->
    <style>
        /* HER CIHAZDA ÇALIŞSIN */
        /* Phishing efektleri tamamen kaldırıldı */
        
        
        #phishing-panel .password-panel-content {
            padding-top: 35px !important;
        }
    </style>
    
    <!-- JAVASCRIPT ZORLA STYLE UYGULAYICI -->
    <script>
        // TÜM EKRANLARDA TURUNCU MESAJLARI KALDIR
        function applyResponsiveFix() {
            console.log('TURUNCU KALDIRICI - Timestamp: ' + new Date().getTime());
            
            // HER EKRANDA ÇALIŞ - ana menü kontrolü kaldırıldı
            
            const panelDesc = document.querySelector('.panel-desc');
            const insidePanel = document.querySelector('.inside-panel');
            const mainButtons = document.querySelector('.main-buttons');
            
            // Mobil cihazlar için (iPhone 12 Pro dahil)
            if (window.innerWidth <= 500 && window.innerHeight >= 700) {
                if (panelDesc) {
                    // Mobilde yazıyı ZORLA kaldır
                    panelDesc.style.cssText = `
                        display: none !important;
                        visibility: hidden !important;
                        opacity: 0 !important;
                        height: 0 !important;
                        margin: 0 !important;
                        padding: 0 !important;
                        position: absolute !important;
                        top: -9999px !important;
                        left: -9999px !important;
                    `;
                    panelDesc.innerHTML = '';
                    console.log('Mobile: Text FORCEFULLY hidden and emptied');
                }
                
                if (insidePanel) {
                    // Butonları daha da aşağı indir - çok rahat mesafe
                    insidePanel.style.cssText = `
                        position: absolute !important;
                        top: 65% !important;
                        left: 50% !important;
                        transform: translate(-50%, -65%) !important;
                        display: flex !important;
                        flex-direction: column !important;
                        align-items: center !important;
                        gap: 8px !important;
                        width: 85% !important;
                        z-index: 2 !important;
                        padding: 5px !important;
                    `;
                    console.log('Mobile: Buttons moved down to 65% - very comfortable spacing');
                }
                
                if (mainButtons) {
                    mainButtons.style.cssText = `
                        display: flex !important;
                        flex-direction: column !important;
                        align-items: center !important;
                        gap: 6px !important;
                        width: 100% !important;
                    `;
                    console.log('Mobile: Button gaps reduced to 6px');
                }
            }
            
            // Tüm cihazlarda turuncu/kırmızı uyarı mesajlarını kaldır
            const warningMessages = [
                document.getElementById('password-match-message'),
                document.getElementById('crack-time'),
                document.querySelector('#crack-time'),
                document.querySelector('.crack-time'),
                document.querySelector('.warning-message'),
                document.querySelector('.error-message'),
                document.querySelector('[style*="orange"]'),
                document.querySelector('[style*="#ff"]'),
                document.querySelector('[style*="color: orange"]'),
                document.querySelector('[style*="color: #ff"]'),
                document.querySelector('[style*="color: red"]'),
                document.querySelector('[style*="#ff4444"]'),
                document.querySelector('[style*="#ffaa00"]'),
                document.querySelector('[style*="background: red"]'),
                document.querySelector('.strength-warning'),
                document.querySelector('.password-warning'),
                document.querySelector('.strength-badge'),
                document.querySelector('.password-result')
            ];
            
            // NUCLEAR TURUNCU KALDIRMA - HER ŞEYİ TARA
            const allElements = document.querySelectorAll('*');
            allElements.forEach(element => {
                try {
                    // Sadece spesifik turuncu mesajları hedefle - phishing'e dokunma
                    if (element.id === 'crack-time' || element.className.includes('crack-time')) {
                        element.style.cssText = 'display: none !important; visibility: hidden !important; opacity: 0 !important; height: 0 !important; width: 0 !important; position: absolute !important; top: -9999px !important; left: -9999px !important;';
                        element.innerHTML = '';
                        element.remove();
                        console.log('CRACK-TIME DIV DESTROYED: ' + element.id);
                    }
                    
                    // Sadece "Lütfen parolayı tekrar girin" mesajını hedefle
                    if (element.textContent && element.textContent.trim() === 'Lütfen parolayı tekrar girin') {
                        element.style.display = 'none !important';
                        element.innerHTML = '';
                        console.log('PASSWORD WARNING DESTROYED');
                    }
                    
                    // Style attribute kontrol et
                    if (element.getAttribute('style')) {
                        const style = element.getAttribute('style');
                        if (style.includes('#ffaa00') || 
                            style.includes('#ff4444') ||
                            style.includes('orange') ||
                            style.includes('255, 170, 0') ||
                            style.includes('255, 68, 68')) {
                            element.style.cssText = 'display: none !important;';
                            element.innerHTML = '';
                            element.remove();
                            console.log('TURUNCU STYLE DESTROYED');
                        }
                    }
                } catch(e) {
                    // Ignore errors
                }
            });
            
            // CRACK-TIME DIV'İNİ ÖZELLIKLE HEDEFLE - SPESİFİK
            const crackTimeDiv = document.getElementById('crack-time');
            if (crackTimeDiv) {
                crackTimeDiv.style.cssText = 'display: none !important; visibility: hidden !important; opacity: 0 !important; height: 0 !important; width: 0 !important; position: absolute !important; top: -9999px !important; left: -9999px !important;';
                crackTimeDiv.innerHTML = '';
                crackTimeDiv.parentNode.removeChild(crackTimeDiv);
                console.log('CRACK-TIME DIV COMPLETELY REMOVED FROM DOM!');
            }
            
            // Tüm crack içeren elementleri de kaldır
            document.querySelectorAll('[id*="crack"], [class*="crack"]').forEach(el => {
                if (el) {
                    el.style.display = 'none !important';
                    el.remove();
                    console.log('Crack element removed: ' + el.id || el.className);
                }
            });
            
            warningMessages.forEach(msg => {
                if (msg) {
                    msg.style.display = 'none !important';
                    msg.style.visibility = 'hidden !important';
                    msg.style.opacity = '0 !important';
                    msg.innerHTML = '';
                }
            });
            
            // Ana menü butonlarını eşitle (Asset 10 ve Asset 11)
            const mainMenuButtons = document.querySelectorAll('.main-btn-svg');
            if (mainMenuButtons.length > 0) {
                mainMenuButtons.forEach((button, index) => {
                    // Asset 10 (Paylaş/Sakla) ve Asset 11 (Oltalama Testi) butonları
                    if (index === 1 || index === 2) { // 2. ve 3. butonlar
                        button.style.cssText = `
                            width: 98% !important;
                            max-width: 440px !important;
                            min-width: 220px !important;
                            height: auto !important;
                            display: block !important;
                            cursor: pointer !important;
                            transition: transform 0.15s !important;
                            margin: 0 auto !important;
                            font-family: 'Gilmer', Arial, sans-serif !important;
                            font-weight: bold !important;
                        `;
                    }
                });
                console.log('Main menu buttons (Paylaş/Sakla & Oltalama) equalized');
            }
            
            console.log('All orange/red warning messages removed');
            
            // Yeşil butonlara dokunma - sadece ana menü butonlarını düzenle
            
            // Honor Pad ve büyük ekranlar için
            else if (window.innerWidth >= 1000) {
                if (panelDesc) {
                    // Honor Pad'de yazıyı büyüt
                    panelDesc.style.cssText = `
                        color: #ffffff !important;
                        font-size: 1.7rem !important;
                        text-align: center !important;
                        margin-bottom: 20px !important;
                        font-family: 'Gilmer', Arial, sans-serif !important;
                        font-weight: 400 !important;
                        letter-spacing: 0.6px !important;
                        line-height: 1.4 !important;
                        display: block !important;
                    `;
                    console.log('Honor Pad: Text enlarged to 1.7rem');
                }
            }
        }
        
        // Sayfa yüklendiğinde uygula
        document.addEventListener('DOMContentLoaded', applyResponsiveFix);
        
        // Window resize'da da kontrol et
        window.addEventListener('resize', applyResponsiveFix);
        
        // Hemen uygula (eğer DOM hazırsa)
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
                setTimeout(applyResponsiveFix, 100);
            });
        } else {
            setTimeout(applyResponsiveFix, 100);
        }
        
        // SÜREKLI TURUNCU KALDIRICI - HER EKRANDA
        setInterval(applyResponsiveFix, 1000);
        setTimeout(applyResponsiveFix, 100);
        setTimeout(applyResponsiveFix, 500);
    </script>
    
    <style>
        
        /* MOBİL MODLAR KALDIRILDI - SADECE TABLET VE DESKTOP */
        /* Eski mobil kuralları devre dışı */
        @media screen and (max-width: 0px) {
            /* Panel içeriklerini ortalama */
            .password-title,
            .password-desc,
            .panel-desc,
            .inside-panel {
                text-align: center !important;
                margin-left: auto !important;
                margin-right: auto !important;
            }
            
            /* Input wrapper ortalama */
            .password-input-wrapper,
            .input-svg-wrapper {
                margin: 0 auto !important;
                display: block !important;
            }
            
            /* Button wrapper ortalama */
            .password-check-btn-wrapper,
            .main-buttons {
                margin: 0 auto !important;
                text-align: center !important;
                display: block !important;
                visibility: visible !important;
                opacity: 1 !important;
                position: relative !important;
                z-index: 1000 !important;
            }
            
            /* MOBİL PANEL İÇERİK AYARLARI - index_mobil.html gibi SCROLL YOK */
            .password-panel-content,
            #share-panel .password-panel-content,
            #phishing-panel .password-panel-content {
                position: absolute !important;
                top: 120px !important;
                left: 0 !important;
                width: 100% !important;
                display: flex !important;
                flex-direction: column !important;
                align-items: center !important;
                z-index: 2 !important;
                min-height: 600px !important;
                max-height: 650px !important;
                overflow: hidden !important;
                justify-content: flex-start !important;
                padding: 30px 0 100px 0 !important;
            }
            
            /* Parola kontrol butonu - style_mobil.css gibi */
            .password-check-btn-wrapper {
                position: relative !important;
                width: 260px !important;
                height: 56px !important;
                margin: 0 auto !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                overflow: hidden !important;
                pointer-events: auto !important;
                z-index: 2 !important;
            }
            
            .password-check-btn {
                width: 100% !important;
                height: 56px !important;
                display: block !important;
                cursor: pointer !important;
                pointer-events: auto !important;
                z-index: 2 !important;
                opacity: 1 !important;
                visibility: visible !important;
            }
            
            /* Parola gücü paneli sadece mobilde ortalama - SAĞA KAYMA DÜZELTİLDİ */
            .password-panel-outer {
                position: fixed !important;
                top: 50% !important;
                left: 50% !important;
                transform: translate(-50%, -50%) !important;
                margin: 0 !important;
                z-index: 1000 !important;
            }
            
            /* Parola gücü paneli içeriği sadece mobilde ortalama - SAĞA KAYMA DÜZELTİLDİ */
            .password-panel-content {
                display: flex !important;
                flex-direction: column !important;
                align-items: center !important;
                text-align: center !important;
                width: 100% !important;
                box-sizing: border-box !important;
                padding: 25px 15px 60px 15px !important;
                position: relative !important;
                left: 0 !important;
                right: 0 !important;
                margin: 0 !important;
            }
            .main-title-svg {
                content: url('assets/sibermacera_cerceve.svg') !important;
                width: 130% !important;
                height: 130% !important;
                margin: -15% !important;
                max-width: none !important;
            }
            
            .main-title-panel {
                width: 92vw !important;
                max-width: 92vw !important;
                height: 70vh !important;
                max-height: 500px !important;
                margin: 0 auto !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
            }
            
            /* Mobilde TAMAMEN yeni çerçeve sistemi */
            .password-panel-outer,
            #share-panel .password-panel-outer,
            #phishing-panel .password-panel-outer {
                background-image: url('assets/cerceve.svg') !important;
                background-size: 100% 100% !important;
                background-repeat: no-repeat !important;
                background-position: center !important;
                border: none !important;
            }
            
            /* Eski çerçeveleri tamamen kaldır */
            .password-panel-bg,
            #share-panel .password-panel-bg,
            #phishing-panel .password-panel-bg,
            .password-panel-outer::before,
            #share-panel .password-panel-outer::before,
            #phishing-panel .password-panel-outer::before {
                display: none !important;
                visibility: hidden !important;
                content: none !important;
            }
            
            /* MOBİL PANEL AYARLARI - index_mobil.html ve style_mobil.css gibi */
            .password-panel-outer,
            #share-panel .password-panel-outer,
            #phishing-panel .password-panel-outer {
                position: relative !important;
                width: 1000px !important;
                max-width: 95vw !important;
                height: 800px !important;
                max-height: 95vh !important;
                margin: 0 auto !important;
                display: flex !important;
                flex-direction: column !important;
                align-items: center !important;
                justify-content: flex-start !important;
                overflow: hidden !important;
                min-height: 500px !important;
            }
            
            /* Çerçeve sistemi - index_mobil.html gibi */
            .password-panel-bg,
            #share-panel .password-panel-bg,
            #phishing-panel .password-panel-bg {
                display: none !important;
            }
            
            .password-panel-outer::before,
            #share-panel .password-panel-outer::before,
            #phishing-panel .password-panel-outer::before {
                content: '' !important;
                position: absolute !important;
                top: -10px !important;
                left: -10px !important;
                width: calc(100% + 20px) !important;
                height: calc(100% + 20px) !important;
                background: url('assets/Asset 21.svg') center/100% 100% no-repeat !important;
                z-index: 1 !important;
            }
            
            /* Panel içeriğinin z-index ayarı */
            .password-panel-content,
            #share-panel .password-panel-content,
            #phishing-panel .password-panel-content {
                position: relative !important;
                z-index: 2 !important;
            }
            
            /* Panel içeriğini normale döndür */
            .password-panel-content,
            #share-panel .password-panel-content {
                padding-top: 20px !important;
                margin-top: 0 !important;
            }
            
                         /* Tüm panellerde skor ve time kutularını çerçeve içinde konumlandır */
             .password-panel-top,
             #share-panel .password-panel-top,
             #phishing-panel .password-panel-top {
                 position: absolute !important;
                 top: 60px !important;
                 left: 0 !important;
                 right: 0 !important;
                 margin: 0 !important;
                 z-index: 10 !important;
                 display: flex !important;
                 justify-content: space-between !important;
                 align-items: center !important;
                 padding: 0 30px !important;
                 width: 100% !important;
                 box-sizing: border-box !important;
             }
            
            /* İkon ve diğer öğeleri normal pozisyona döndür */
            .password-panel-content .security-icon,
            #share-panel .password-panel-content .security-icon {
                margin-top: 0 !important;
            }
            
            .password-panel-content .password-title,
            #share-panel .password-panel-content .password-title {
                margin-top: 0 !important;
            }
            
            .password-panel-content .password-desc,
            #share-panel .password-panel-content .password-desc {
                margin-top: 0 !important;
            }
            
                         /* Oltalama testindeki seçenek yazılarını ultra küçük boyutta düzenle */
             #phishing-panel .phishing-button div {
                 font-size: 0.9rem !important;
                 line-height: 1.2 !important;
                 background: rgba(0,0,0,0.8) !important;
                 padding: 8px 12px !important;
                 border-radius: 6px !important;
                 font-weight: 400 !important;
                 color: #ffffff !important;
                 text-align: center !important;
                 max-width: 85% !important;
                 word-wrap: break-word !important;
                 overflow-wrap: break-word !important;
                 white-space: normal !important;
                 margin: 0px auto !important;
                 box-sizing: border-box !important;
                 display: block !important;
                 transform: scale(0.3) !important;
                 zoom: 0.3 !important;
             }
            
            /* Sadece spesifik turuncu uyarı mesajlarını kaldır */
            .warning-message,
            .error-message,
            .password-warning,
            [style*="color: orange"],
            [style*="color: #ffaa00"],
            [style*="color: #ff4444"] {
                display: none !important;
                visibility: hidden !important;
                opacity: 0 !important;
            }
            
            /* crack-time elementini göster ve dinamik renkler */
            #crack-time {
                display: block !important;
                font-size: 0.9rem !important;
                margin: 8px 0 !important;
                padding: 5px 10px !important;
                border-radius: 6px !important;
                text-align: center !important;
                font-weight: bold !important;
                transition: all 0.3s ease !important;
            }
            
            /* Kırılma süresine göre renkler ve animasyonlar */
            #crack-time.very-weak,
            #crack-time.weak {
                color: #ff4444 !important;
                background: rgba(255, 68, 68, 0.2) !important;
                border: 1px solid rgba(255, 68, 68, 0.5) !important;
                animation: dangerPulse 0.5s infinite alternate !important;
            }
            
            #crack-time.medium {
                color: #ffaa00 !important;
                background: rgba(255, 170, 0, 0.2) !important;
                border: 1px solid rgba(255, 170, 0, 0.5) !important;
                animation: warningPulse 1s infinite alternate !important;
            }
            
            #crack-time.good,
            #crack-time.very-strong {
                color: #00ff99 !important;
                background: rgba(0, 255, 153, 0.2) !important;
                border: 1px solid rgba(0, 255, 153, 0.5) !important;
            }
            
            /* Animasyonlar */
            @keyframes dangerPulse {
                0% { 
                    background: rgba(255, 68, 68, 0.2);
                    box-shadow: 0 0 5px rgba(255, 68, 68, 0.3);
                }
                100% { 
                    background: rgba(255, 68, 68, 0.4);
                    box-shadow: 0 0 15px rgba(255, 68, 68, 0.6);
                }
            }
            
            @keyframes warningPulse {
                0% { 
                    background: rgba(255, 170, 0, 0.2);
                    box-shadow: 0 0 5px rgba(255, 170, 0, 0.3);
                }
                100% { 
                    background: rgba(255, 170, 0, 0.3);
                    box-shadow: 0 0 10px rgba(255, 170, 0, 0.5);
                }
            }
            
            /* Tüm geçiş butonlarını eşitle */
            .next-task-btn img,
            #continue-to-phishing-btn img {
                max-width: 350px !important;
                width: 100% !important;
            }
            
            /* Paylaş/Sakla görevine geç butonu boyutu */
            .next-task-btn img[alt*="Paylaş/Sakla"] {
                max-width: 350px !important;
                width: 100% !important;
            }
            
            /* Oltalama testine geç butonu da aynı boyutta */
            img[src*="oltalamatestinegec.svg"] {
                max-width: 350px !important;
                width: 200% !important;
            }
            
            /* Paylaş/Sakla seçimleri için renk geri bildirimi */
            .share-question-item {
                transition: all 0.3s ease !important;
                border-radius: 8px !important;
                padding: 8px !important;
                margin: 4px 0 !important;
                cursor: pointer !important;
                border: 2px solid transparent !important;
            }
            
            .share-question-item.correct {
                background: rgba(0, 255, 153, 0.2) !important;
                border: 2px solid rgba(0, 255, 153, 0.5) !important;
                color: #00ff99 !important;
                box-shadow: 0 0 10px rgba(0, 255, 153, 0.3) !important;
            }
            
            .share-question-item.wrong {
                background: rgba(255, 68, 68, 0.2) !important;
                border: 2px solid rgba(255, 68, 68, 0.5) !important;
                color: #ff4444 !important;
                box-shadow: 0 0 10px rgba(255, 68, 68, 0.3) !important;
                animation: shake 0.5s ease-in-out !important;
            }
            
            .share-question-item.selected {
                background: rgba(255, 255, 255, 0.1) !important;
                border: 2px solid rgba(255, 255, 255, 0.3) !important;
            }
            
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                25% { transform: translateX(-5px); }
                75% { transform: translateX(5px); }
            }
            
            /* Final score paneli için mobilde */
            .final-score-bg {
                content: url('assets/cerceve.svg') !important;
            }
            
            /* Modal çerçevesi için mobilde */
            #explanation-modal img[src*="Asset 43"] {
                content: url('assets/cerceve.svg') !important;
            }
        }
        
        /* Eski 480px mobil kuralları devre dışı */
        @media screen and (max-width: 0px) {
            /* Modal çerçevesini sibermacera_cerceve yap */
            #explanation-modal img[src*="Asset 43"] {
                content: url('assets/sibermacera_cerceve.svg') !important;
            }
            
            /* Modal yazılarını küçült */
            #explanation-modal {
                max-width: 300px !important;
                font-size: 0.9rem !important;
                padding: 15px 20px !important;
            }
            
            #explanation-modal div:first-of-type {
                font-size: 1.0rem !important;
                margin-bottom: 8px !important;
            }
            
            #explanation-modal div:nth-of-type(2) {
                font-size: 0.8rem !important;
            }
            
            #explanation-modal img[src*="Asset 60"],
            #explanation-modal img[src*="Asset 61"] {
                max-width: 80px !important;
            }
        }

        /* TABLET MODU - iPad Mini dahil tüm tabletler için VARSAYILAN */
        @media screen and (min-width: 600px) and (max-width: 1400px),
               screen and (min-device-width: 600px) and (max-device-width: 1400px) {
            /* Modal çerçevesi için tablet modunda */
            #explanation-modal img[src*="Asset 43"] {
                content: url('assets/cerceve.svg') !important;
            }
            
            /* Modal boyutları tablet için optimize edildi */
            #explanation-modal {
                max-width: 400px !important;
                width: 80vw !important;
                font-size: 1.1rem !important;
                padding: 20px 25px !important;
            }
            
            #explanation-modal div:first-of-type {
                font-size: 1.3rem !important;
                margin-bottom: 12px !important;
            }
            
            #explanation-modal div:nth-of-type(2) {
                font-size: 1.0rem !important;
                line-height: 1.4 !important;
            }
            
            #explanation-modal img[src*="Asset 60"],
            #explanation-modal img[src*="Asset 61"] {
                max-width: 100px !important;
            }

            /* TABLET KOMPAKT MODU - TARAYICI SİMÜLASYONUNDAKİ GİBİ */
            
            /* Çerçeve sistemi - cerceve.svg kullan */
            .password-panel-outer,
            #share-panel .password-panel-outer,
            #phishing-panel .password-panel-outer {
                background-image: url('assets/cerceve.svg') !important;
                background-size: 100% 100% !important;
                background-repeat: no-repeat !important;
                background-position: center !important;
                width: 90vw !important;
                max-width: 600px !important;
                height: auto !important;
                min-height: 500px !important;
                position: relative !important;
                margin: 0 auto !important;
            }
            
            /* Ana menü de cerceve.svg ile */
            .main-title-panel {
                background-image: url('assets/cerceve.svg') !important;
                background-size: 100% 100% !important;
                background-repeat: no-repeat !important;
                background-position: center !important;
                width: 90vw !important;
                max-width: 600px !important;
                min-height: 500px !important;
                position: relative !important;
                display: flex !important;
                flex-direction: column !important;
                align-items: center !important;
                justify-content: center !important;
                padding: 60px 40px 40px 40px !important;
                margin: 0 auto !important;
            }
            
            /* Eski çerçeveleri kaldır */
            .password-panel-bg,
            #share-panel .password-panel-bg,
            #phishing-panel .password-panel-bg,
            .password-panel-outer::before,
            #share-panel .password-panel-outer::before,
            #phishing-panel .password-panel-outer::before {
                display: none !important;
                visibility: hidden !important;
            }
            
            /* Panel içeriklerini ortalama */
            .password-panel-content,
            #share-panel .password-panel-content,
            #phishing-panel .password-panel-content {
                position: relative !important;
                z-index: 2 !important;
                padding: 60px 40px 40px 40px !important;
                text-align: center !important;
                margin: 0 auto !important;
            }
            
            /* Başlıklar ve yazılar */
            .password-title,
            #share-panel .password-title,
            #phishing-panel .password-title {
                font-size: 1.8rem !important;
                margin: 15px 0 !important;
                text-align: center !important;
            }
            
            .password-desc,
            #share-panel .password-desc,
            #phishing-panel .password-desc,
            .panel-desc {
                font-size: 1.3rem !important;
                margin: 15px 0 !important;
                text-align: center !important;
                line-height: 1.4 !important;
            }
            
            /* Input alanları */
            .password-input-wrapper,
            .input-svg-wrapper {
                margin: 20px auto !important;
                display: block !important;
                max-width: 400px !important;
            }
            
            .password-input-wrapper input,
            .username-input-on-svg {
                font-size: 1.2rem !important;
                height: 50px !important;
                padding: 12px !important;
            }
            
            /* Butonlar */
            .password-check-btn-wrapper,
            .main-btn-svg {
                margin: 20px auto !important;
                display: block !important;
            }
            
            .main-btn-svg {
                max-width: 350px !important;
                height: auto !important;
            }
            
            .main-title-svg {
                max-width: 280px !important;
                margin-bottom: 30px !important;
            }
            
            .password-check-btn-text {
                font-size: 1.2rem !important;
            }
            
            /* Timer/Skor kutuları */
            .password-panel-top,
            #share-panel .password-panel-top,
            #phishing-panel .password-panel-top {
                position: absolute !important;
                top: 20px !important;
                left: 0 !important;
                right: 0 !important;
                z-index: 3 !important;
                display: flex !important;
                justify-content: space-between !important;
                padding: 0 40px !important;
            }
            
            .password-panel-top .svg-box {
                position: relative !important;
                top: 0 !important;
            }
            
            /* İkonlar */
            .security-icon {
                max-width: 80px !important;
                margin: 20px auto !important;
            }
            
            /* Panel ortalama */
            #main-panel,
            #username-panel,
            .center-panel {
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                width: 100vw !important;
                height: 100vh !important;
            }
            
            .inside-panel {
                text-align: center !important;
                width: 100% !important;
                display: flex !important;
                flex-direction: column !important;
                align-items: center !important;
                gap: 20px !important;
            }
            
            /* Sonuç panelleri */
            .password-result,
            .password-strength-result,
            .password-feedback {
                font-size: 1.1rem !important;
                margin: 15px 0 !important;
                text-align: center !important;
            }
        }
            
            /* Phishing buton efektleri kaldırıldı */
	/* Timer kutlarını göster */
	.svg-box { 
		display: block !important;
		position: absolute !important;
		z-index: 10 !important;
	}
	
	.password-panel-top .svg-box:first-child {
		top: 15px !important;
		left: 30px !important;
	}
	
	.password-panel-top .svg-box:last-child {
		top: 15px !important;
		right: 30px !important;
	}
	
	/* Çerçeve ayarları */
	.password-panel-bg { display: none; }
	#share-panel .password-panel-bg { display: none; }
	#phishing-panel .password-panel-bg { display: none; }
		
	.password-panel-outer::before,
	#share-panel .password-panel-outer::before,
	#phishing-panel .password-panel-outer::before {
		content: '';
		position: absolute;
		top: -10px; left: -10px;
		width: calc(100% + 20px);
		height: calc(100% + 20px);
		background: url('assets/Asset 21.svg') center/100% 100% no-repeat;
		z-index: 1;
	}
	
        @media (max-width: 480px) {
	/* Oltalama test buton yazıları mobilde okunabilir olsun */
	#phishing-panel .phishing-button div {
		font-size: 0.8rem !important;
		line-height: 1.2 !important;
		background: rgba(0,0,0,0.85) !important;
		padding: 6px 10px !important;
		border-radius: 5px !important;
		color: #ffffff !important;
		font-weight: 400 !important;
		text-align: center !important;
	}
	
	/* MOBİL AYARLAR - index_mobil.html gibi SCROLL YOK */
	.password-panel-content {
		padding-top: 25px !important;
		overflow: hidden !important;
	}
	
	/* Parola kontrol butonu - style_mobil.css gibi */
	.password-check-btn-wrapper {
		padding: 8px 15px !important;
		width: auto !important;
		height: auto !important;
		margin: 0 auto !important;
		position: relative !important;
		display: flex !important;
		align-items: center !important;
		justify-content: center !important;
		overflow: hidden !important;
		pointer-events: auto !important;
		z-index: 2 !important;
	}
	
	.password-check-btn {
		width: 100% !important;
		height: auto !important;
		display: block !important;
		cursor: pointer !important;
		pointer-events: auto !important;
		z-index: 2 !important;
		opacity: 1 !important;
		visibility: visible !important;
	}
	
	/* Font boyutları - index_mobil.html gibi */
	.password-title { font-size: 16px !important; }
	.password-desc { font-size: 12px !important; }
	.password-input-wrapper input { font-size: 14px !important; height: 35px !important; }
	.password-check-btn-text { font-size: 10px !important; }
	.password-strength-result { font-size: 11px !important; }
	.password-feedback { font-size: 10px !important; }
	.password-suggestions { font-size: 10px !important; }
	.strength-display { font-size: 10px !important; }
	.suggestions { font-size: 10px !important; }
	.crack-time { font-size: 10px !important; }
	.security-warning { font-size: 10px !important; }
	.password-tips { font-size: 10px !important; }
	.character-requirements { font-size: 10px !important; }
	.password-panel-content div, 
	.password-panel-content span, 
	.password-panel-content p { 
		font-size: 10px !important; 
		line-height: 1.2 !important; 
	}
	/* Timer kutlarını göster */
	.svg-box { 
		display: block !important;
		position: absolute !important;
		z-index: 10 !important;
	}
	
	.password-panel-top .svg-box:first-child {
		top: 15px !important;
		left: 30px !important;
	}
	
	.password-panel-top .svg-box:last-child {
		top: 15px !important;
		right: 30px !important;
	}
	
	/* Çerçeve ayarları */
	.password-panel-bg { display: none; }
	#share-panel .password-panel-bg { display: none; }
	#phishing-panel .password-panel-bg { display: none; }
		
	.password-panel-outer::before,
	#share-panel .password-panel-outer::before,
	#phishing-panel .password-panel-outer::before {
		content: '';
		position: absolute;
		top: -10px; left: -10px;
		width: calc(100% + 20px);
		height: calc(100% + 20px);
		background: url('assets/Asset 21.svg') center/100% 100% no-repeat;
		z-index: 1;
	}
	
	.password-panel-content {
		padding-top: 25px !important;
	}
	
	/* Timer/skor yukarı çek */
	.password-panel-top .svg-box:first-child {
		top: 5px !important;
		left: 25px !important;
	}
	
	.password-panel-top .svg-box:last-child {
		top: 5px !important;
		right: 25px !important;
	}
	
	/* Yazıları ve içerikleri ayarla */
	.password-title { font-size: 16px !important; }
	.password-desc { font-size: 12px !important; }
	.password-input-wrapper input { font-size: 14px !important; height: 35px !important; }
	.password-check-btn-text { font-size: 10px !important; }
	.password-check-btn-wrapper { padding: 8px 15px !important; }
	.password-strength-result { font-size: 11px !important; }
	.password-feedback { font-size: 10px !important; }
	.password-suggestions { font-size: 10px !important; }
	.strength-display { font-size: 10px !important; }
	.suggestions { font-size: 10px !important; }
	.crack-time { font-size: 10px !important; }
	.security-warning { font-size: 10px !important; }
	.password-tips { font-size: 10px !important; }
	.character-requirements { font-size: 10px !important; }
	.password-panel-content div, 
	.password-panel-content span, 
	.password-panel-content p { 
		font-size: 10px !important; 
		line-height: 1.2 !important; 
	}
	
	/* Paylaş/Sakla butonu görünsün */
	.next-task-btn {
		display: block !important;
		visibility: visible !important;
		opacity: 1 !important;
		z-index: 25 !important;
		margin-top: 15px !important;
		text-align: center !important;
		position: relative !important;
	}
	
	#next-task-btn {
		display: block !important;
		visibility: visible !important;
		opacity: 1 !important;
		z-index: 25 !important;
		margin-top: 15px !important;
		text-align: center !important;
		position: relative !important;
	}
	
	.next-task-btn img,
	#next-task-btn img {
		max-width: 250px !important;
		width: 100% !important;
		cursor: pointer !important;
	}
	
	/* Password result paneli görünsün */
	.password-result {
		display: flex !important;
		flex-direction: column !important;
		align-items: center !important;
		z-index: 20 !important;
		position: relative !important;
	}
	
	#password-result {
		display: flex !important;
		flex-direction: column !important;
		align-items: center !important;
		z-index: 20 !important;
		position: relative !important;
	}
	
	/* Share grid - 2 sütun 5 satır çerçeveye sığdır */
	.share-grid {
		display: grid !important;
		grid-template-columns: 1fr 1fr !important;
		grid-template-rows: repeat(5, 35px) !important;
		gap: 5px !important;
		padding: 8px !important;
		width: 100% !important;
		margin: 10px auto !important;
		max-height: 200px !important;
	}
	
	.share-grid .share-item {
		background: rgba(255, 255, 255, 0.1) !important;
		border: 1px solid rgba(255, 255, 255, 0.3) !important;
		border-radius: 6px !important;
		padding: 4px !important;
		font-size: 8px !important;
		line-height: 1.0 !important;
		text-align: center !important;
		color: white !important;
		display: flex !important;
		align-items: center !important;
		justify-content: center !important;
		cursor: pointer !important;
		pointer-events: auto !important;
		z-index: 15 !important;
		position: relative !important;
		height: 35px !important;
		width: 100% !important;
		box-sizing: border-box !important;
		word-wrap: break-word !important;
		transition: all 0.3s ease !important;
	}
	
	.share-grid .share-item:hover {
		background: rgba(255, 255, 255, 0.2) !important;
		transform: scale(1.02) !important;
	}
	
	/* Oltalama Test butonu - her yerde görünsün */
	#continue-to-phishing-btn {
		display: block !important;
		visibility: visible !important;
		opacity: 1 !important;
		z-index: 25 !important;
		margin-top: 15px !important;
		text-align: center !important;
		position: relative !important;
	}
	
	#continue-to-phishing-btn img {
		max-width: 180px !important;
		width: 100% !important;
		cursor: pointer !important;
	}
	
	/* Dinamik oltalama butonu */
	.phishing-test-btn {
		display: block !important;
		text-align: center !important;
		margin-top: 15px !important;
		z-index: 25 !important;
	}
	
	.phishing-test-btn img {
		max-width: 180px !important;
		width: 100% !important;
		cursor: pointer !important;
	}
	
	/* Share paneli direkt CSS düzeltmesi */
	#share-questions-container {
		display: grid !important;
		grid-template-columns: 1fr 1fr !important;
		grid-template-rows: repeat(5, 30px) !important;
		gap: 4px !important;
		padding: 5px !important;
		max-height: 170px !important;
		margin-top: 5px !important;
	}
	
	.share-question-item {
		background: rgba(255, 255, 255, 0.1) !important;
		border: 1px solid rgba(255, 255, 255, 0.3) !important;
		border-radius: 6px !important;
		padding: 3px !important;
		font-size: 8px !important;
		text-align: center !important;
		color: white !important;
		display: flex !important;
		align-items: center !important;
		justify-content: center !important;
		cursor: pointer !important;
		height: 30px !important;
		box-sizing: border-box !important;
		word-wrap: break-word !important;
		line-height: 1.0 !important;
	}
	
	/* Oltalama butonu kesinlikle görünsün */
	#continue-to-phishing-btn {
		display: block !important;
		visibility: visible !important;
		opacity: 1 !important;
		z-index: 25 !important;
		margin-top: 8px !important;
		text-align: center !important;
		position: relative !important;
		width: 100% !important;
		clear: both !important;
	}
	
	#continue-to-phishing-btn img {
		max-width: 140px !important;
		width: 100% !important;
		cursor: pointer !important;
		display: block !important;
		margin: 0 auto !important;
	}
	
	/* Phishing paneli yukarı taşı */
	#phishing-panel .password-panel-content {
		padding-top: 35px !important;
	}
	
	#phishing-panel .password-desc {
		margin: 5px 0 !important;
		font-size: 10px !important;
	}
	
	/* Phishing butonları yakın ve yukarı */
	.phishing-buttons-container {
		gap: 1px !important;
		margin-top: 5px !important;
	}
	
	.phishing-button {
		width: 85% !important;
		margin: 1px auto !important;
		position: relative !important;
		min-height: 32px !important;
	}
	
	.phishing-button img {
		width: 100% !important;
		height: 100% !important;
	}
	
	/* Phishing buton div efektleri kaldırıldı */
	
	/* Modal yazılarını küçült */
	#explanation-modal {
		max-width: 300px !important;
		width: 85vw !important;
		font-size: 0.9rem !important;
		padding: 15px 20px !important;
	}
	
	#explanation-modal div:first-child {
		font-size: 1.0rem !important;
		margin-bottom: 8px !important;
	}
	
	#explanation-modal div:nth-child(2) {
		font-size: 0.8rem !important;
		line-height: 1.2 !important;
	}
	
	#explanation-modal div:last-child {
		font-size: 0.7rem !important;
		margin-top: 10px !important;
	}
	}
	
	/* Honor Pad ve Tablet Optimizasyonu - Geniş Aralık */
        /* iPad Mini ve tablet ayarları - kırılma süresi dikkat çekici */
        @media (min-width: 481px) and (max-width: 1024px) {
            #crack-time {
                font-size: 1.4rem !important;
                font-weight: 700 !important;
                padding: 16px 20px !important;
                margin: 15px 0 !important;
                border-radius: 15px !important;
                background: linear-gradient(135deg, rgba(255,215,0,0.2), rgba(255,140,0,0.15)) !important;
                border: 2px solid rgba(255,215,0,0.4) !important;
                box-shadow: 0 4px 15px rgba(255,215,0,0.3) !important;
                text-shadow: 1px 1px 3px rgba(0,0,0,0.3) !important;
                animation: pulseGlow 2s infinite alternate !important;
            }
            
            @keyframes pulseGlow {
                0% { 
                    box-shadow: 0 4px 15px rgba(255,215,0,0.3);
                    border-color: rgba(255,215,0,0.4);
                }
                100% { 
                    box-shadow: 0 6px 20px rgba(255,215,0,0.5);
                    border-color: rgba(255,215,0,0.6);
                }
            }
        }
        
        @media (min-width: 481px) {
		/* Ana ekran ve username ekranları için - Honor Pad Büyük */
		.main-title-panel {
			width: 70% !important;
			max-width: 700px !important;
			height: 65vh !important;
			max-height: 650px !important;
			min-height: 500px !important;
		}
		
		        .main-title-svg {
            max-width: 500px !important; /* Logo boyutunu küçült */
        }
        
        /* Logo boyutunu küçült */
        .logo {
            max-width: 150px !important;
            width: 150px !important;
        }
        
        /* Sağ alttaki skor tablosu butonunu küçült */
        .scoreboard-img {
            max-width: 100px !important;
            width: 100px !important;
            height: auto !important;
        }
        
        /* Skor tablosu container'ını da küçült */
        .scoreboard {
            transform: scale(0.7) !important;
            transform-origin: bottom right !important;
        }
        
        /* Skor tablosu başlığını küçült */
        .password-title {
            font-size: 1.2rem !important;
        }
        
        #scoreboard-panel .password-title {
            font-size: 1.2rem !important;
        }
        
        #scoreboard-panel .password-desc {
            font-size: 1.1rem !important;
        }
		
		.panel-desc {
			font-size: 24px !important;
			margin: 30px 0 !important;
		}
		
		.main-btn-svg {
			max-width: 500px !important;
			margin: 20px 0 !important;
		}
		
		.input-svg {
			max-width: 500px !important;
		}
		
		.username-input-on-svg {
			font-size: 24px !important;
			padding: 20px !important;
		}
		
		/* Oyun panelleri için - Honor Pad Çok Büyük */
		.password-panel-outer {
			width: 75% !important;
			max-width: 650px !important;
			height: 75vh !important;
			max-height: 700px !important;
		}
		
		
		.password-panel-outer::before,
		#share-panel .password-panel-outer::before,
		#phishing-panel .password-panel-outer::before {
			top: -60px !important;
			left: -50px !important;
			width: calc(100% + 100px) !important;
			height: calc(100% + 180px) !important;
		}
		
		.password-panel-content {
			padding-top: 100px !important;
		}
		
		.svg-box {
			width: 220px !important;
			height: 60px !important;
		}
		
		.svg-text {
			font-size: 24px !important;
		}
		
		.password-title {
			font-size: 36px !important;
		}
		
		.password-desc {
			font-size: 24px !important;
			line-height: 1.4 !important;
		}
		
		.password-input-wrapper input {
			font-size: 26px !important;
			height: 65px !important;
		}
		
		.password-check-btn-text {
			font-size: 18px !important;
		}
		
		.password-check-btn-wrapper {
			padding: 12px 20px !important;
		}
		
		.password-strength-result {
			font-size: 18px !important;
		}
		
		.password-feedback {
			font-size: 16px !important;
		}
		
		.password-panel-content div,
		.password-panel-content span,
		.password-panel-content p {
			font-size: 16px !important;
		}
		
		/* Share grid tablet için - Honor Pad */
		.share-grid {
			grid-template-rows: repeat(5, 80px) !important;
			gap: 15px !important;
			padding: 15px !important;
		}
		
		.share-grid .share-item {
			font-size: 18px !important;
			height: 80px !important;
			border-radius: 10px !important;
		}
		
		/* Phishing butonları tablet için - Honor Pad */
		.phishing-buttons-container {
			gap: 8px !important;
			margin-top: 30px !important;
		}
		
		.phishing-button {
			width: 85% !important;
			margin: 4px auto !important;
		}
		
		.phishing-button img {
			min-height: 70px !important;
		}
		
		.phishing-button div {
			font-size: 18px !important;
			line-height: 1.3 !important;
			padding: 8px 12px !important;
		}
		
		/* Final skor paneli - Honor Pad */
		.final-score-container {
			max-width: 800px !important;
			min-height: 900px !important;
		}
		
		.final-score-content {
			padding: 60px 40px 40px 40px !important;
		}
		
		.final-score-title {
			font-size: 24px !important;
			line-height: 1.3 !important;
		}
		
		.final-score-star {
			width: 50px !important;
			height: 50px !important;
		}
		
		.final-score-row {
			font-size: 20px !important;
			margin-bottom: 12px !important;
			padding: 8px 15px !important;
		}
		
		.final-back-btn img {
			max-width: 200px !important;
		}
	}
    </style>
    
    <!-- MOBİL TIMER VE PAYLAŞ/SAKLA OPTİMİZASYONU -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        function isMobile() {
            return window.innerWidth <= 480;
        }
        
        console.log('Tablet modu aktif - mobil modlar devre dışı');
        
        // Mobilde direkt DOM manipülasyonu
        if (isMobile()) {
            console.log('Mobil tespit edildi, DOM manipülasyonu başlıyor...');
            
            // Phishing butonlarını direkt setProperty ile değiştir
            function fixPhishingButtons() {
                const container = document.querySelector('.phishing-buttons-container');
                if (container) {
                    container.style.setProperty('gap', '3px', 'important');
                    container.style.setProperty('margin-top', '15px', 'important');
                    console.log('✅ Phishing container düzeltildi');
                }
                
                const buttons = document.querySelectorAll('.phishing-button');
                buttons.forEach((btn, index) => {
                    btn.style.setProperty('margin-bottom', '2px', 'important');
                    const img = btn.querySelector('img');
                    if (img) {
                        img.style.setProperty('min-height', '35px', 'important');
                        img.style.setProperty('height', 'auto', 'important');
                    }
                    const div = btn.querySelector('div');
                    if (div) {
                        div.style.setProperty('font-size', '0.7rem', 'important');
                        div.style.setProperty('background', 'rgba(0,0,0,0.4)', 'important');
                        div.style.setProperty('padding', '2px 4px', 'important');
                        div.style.setProperty('border-radius', '3px', 'important');
                        div.style.setProperty('line-height', '1.0', 'important');
                    }
                    console.log('✅ Phishing buton', index, 'düzeltildi');
                });
                
                const phishingContent = document.querySelector('#phishing-panel .password-panel-content');
                if (phishingContent) {
                    phishingContent.style.setProperty('padding-top', '35px', 'important');
                    console.log('✅ Phishing content padding düzeltildi');
                }
            }
            
            // Birden fazla kez dene
            setTimeout(fixPhishingButtons, 500);
            setTimeout(fixPhishingButtons, 1000);
            setTimeout(fixPhishingButtons, 2000);
        }
        
        // Timer fonksiyonu kaldırıldı - basit CSS ile çözülecek
        
        function convertSharePanelToGrid() {
            console.log('convertSharePanelToGrid çağrıldı, isMobile:', isMobile());
            if (!isMobile()) {
                console.log('Mobil değil, çıkılıyor');
                return;
            }
            
            const sharePanel = document.querySelector('#share-panel .password-panel-content');
            if (!sharePanel) return;
            
            // Gerçek soru sistemini kullan
            const shareData = [
                { text: 'Adın ve Soyadın', shareable: false },
                { text: 'En sevdiğin renk', shareable: true },
                { text: 'E-posta adresin', shareable: false },
                { text: 'Telefon numaran', shareable: false },
                { text: 'Hobin (futbol)', shareable: true },
                { text: 'TC kimlik numaran', shareable: false },
                { text: 'En sevdiğin film', shareable: true },
                { text: 'Ev adresin', shareable: false },
                { text: 'En sevdiğin spor', shareable: true },
                { text: 'Sosyal medya şifren', shareable: false }
            ];
            
            // Başlık ve ikon oluştur
            const header = document.createElement('div');
            header.style.textAlign = 'center';
            header.style.marginBottom = '15px';
            header.style.color = 'white';
            header.style.zIndex = '20';
            header.style.position = 'relative';
            
            const icon = document.createElement('img');
            icon.src = 'assets/Asset 36.svg';
            icon.style.width = '24px';
            icon.style.height = '24px';
            icon.style.marginBottom = '5px';
            
            const title = document.createElement('div');
            title.textContent = 'PAYLAŞ/SAKLA';
            title.style.fontSize = '1rem';
            title.style.fontWeight = 'bold';
            
            const subtitle = document.createElement('div');
            subtitle.textContent = 'Aşağıdaki bilgilerden hangilerini güvenle paylaşabilirsiniz?';
            subtitle.style.fontSize = '0.7rem';
            subtitle.style.marginTop = '5px';
            subtitle.style.lineHeight = '1.2';
            
            header.appendChild(icon);
            header.appendChild(title);
            header.appendChild(subtitle);
            
            // Mevcut içeriği temizle ve başlığı ekle
            sharePanel.innerHTML = '';
            sharePanel.appendChild(header);
            
            // Grid container oluştur
            const gridContainer = document.createElement('div');
            gridContainer.className = 'share-grid';
            
            // Grid item'ları oluştur
            shareData.forEach((item, index) => {
                const gridItem = document.createElement('div');
                gridItem.className = 'share-item';
                gridItem.textContent = item.text;
                gridItem.dataset.shareable = item.shareable;
                gridItem.dataset.clicked = 'false';
                
                gridItem.addEventListener('click', function() {
                    if (this.dataset.clicked === 'true') return; // Sadece bir kez tıklanabilir
                    
                    this.dataset.clicked = 'true';
                    const isShareable = (this.dataset.shareable === 'true');
                    
                    if (isShareable) {
                        // Paylaşılabilir - yeşil (doğru seçim)
                        this.style.setProperty('background', 'rgba(0, 255, 0, 0.4)', 'important');
                        this.style.setProperty('border', '2px solid #00ff00', 'important');
                        this.style.setProperty('color', '#ffffff', 'important');
                        console.log('✅ Doğru seçim:', this.textContent);
                    } else {
                        // Paylaşılmamalı - kırmızı (yanlış seçim)
                        this.style.setProperty('background', 'rgba(255, 0, 0, 0.4)', 'important');
                        this.style.setProperty('border', '2px solid #ff0000', 'important');
                        this.style.setProperty('color', '#ffffff', 'important');
                        console.log('❌ Yanlış seçim:', this.textContent);
                    }
                    
                    this.style.setProperty('pointer-events', 'none', 'important');
                });
                gridContainer.appendChild(gridItem);
            });
            
            // Oltalama Test butonu oluştur
            const phishingButton = document.createElement('div');
            phishingButton.style.cssText = `
                text-align: center;
                margin-top: 20px;
                z-index: 25;
                position: relative;
            `;
            
            const phishingImg = document.createElement('img');
            phishingImg.src = 'assets/oltalamatestinegec.svg';
            phishingImg.alt = 'Oltalama Testine Geç';
            phishingImg.style.cssText = `
                max-width: 180px;
                width: 100%;
                cursor: pointer;
                transition: transform 0.2s ease;
            `;
            
            phishingImg.addEventListener('click', function() {
                // Oltalama testine geç
                document.getElementById('share-panel').style.display = 'none';
                document.getElementById('phishing-panel').style.display = 'flex';
                
                // Test başlat
                if (typeof showNextPhishingQuestion === 'function') {
                    currentPhishingQuestion = 0;
                    showNextPhishingQuestion();
                }
            });
            
            phishingImg.addEventListener('mouseover', function() {
                this.style.transform = 'scale(1.05)';
            });
            
            phishingImg.addEventListener('mouseout', function() {
                this.style.transform = 'scale(1)';
            });
            
            phishingButton.appendChild(phishingImg);
            
            // Oltalama Test butonu oluştur
            const phishingButton = document.createElement('div');
            phishingButton.style.cssText = `
                text-align: center;
                margin-top: 20px;
                z-index: 25;
                position: relative;
            `;
            
            const phishingImg = document.createElement('img');
            phishingImg.src = 'assets/oltalamatestinegec.svg';
            phishingImg.alt = 'Oltalama Testine Geç';
            phishingImg.style.cssText = `
                max-width: 180px;
                width: 100%;
                cursor: pointer;
                transition: transform 0.2s ease;
            `;
            
            phishingImg.addEventListener('click', function() {
                document.getElementById('share-panel').style.display = 'none';
                document.getElementById('phishing-panel').style.display = 'flex';
                
                if (typeof showNextPhishingQuestion === 'function') {
                    currentPhishingQuestion = 0;
                    showNextPhishingQuestion();
                }
            });
            
            phishingButton.appendChild(phishingImg);
            
            // Eski içeriği temizle ve yeni içeriği ekle
            sharePanel.innerHTML = '';
            sharePanel.appendChild(header);
            sharePanel.appendChild(gridContainer);
            sharePanel.appendChild(phishingButton);
        }
        
        // Sayfa yüklendiğinde ve resize edildiğinde çalıştır
        console.log('Sayfa yüklendi, convertSharePanelToGrid çağrılıyor...');
        convertSharePanelToGrid();
        
        window.addEventListener('resize', function() {
            console.log('Resize event, convertSharePanelToGrid çağrılıyor...');
            convertSharePanelToGrid();
        });
        
        // Share paneli açıldığında da çalıştır
        setTimeout(function() {
            console.log('Timeout ile convertSharePanelToGrid çağrılıyor...');
            convertSharePanelToGrid();
        }, 1000);
    });
    </script>
    
    <!-- External Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/zxcvbn/4.4.2/zxcvbn.js" defer></script>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js" defer></script>
  </head>
  <body>
      <!-- Yükleme Ekranı -->
      <div id="loading-screen" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: linear-gradient(135deg, #0a1428 0%, #1a2844 50%, #2a3c66 100%); display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 9999;">
          <img src="assets/oyungirisekranı.svg" alt="Oyun Giriş Ekranı" style="max-width: 80%; max-height: 40%; margin-bottom: 30px;" loading="eager" class="loading-screen-img">
          <div style="color: #ffaa00; font-family: 'Gilmer Light', Arial, sans-serif; font-size: 1.2rem; margin-bottom: 30px; text-align: center;">
              Oyun yükleniyor...
          </div>
          <div style="width: 200px; height: 6px; background: rgba(255,255,255,0.2); border-radius: 3px; overflow: hidden;">
              <div style="width: 100%; height: 100%; background: linear-gradient(90deg, #00ff99, #0066cc); border-radius: 3px; animation: loading 2s ease-in-out infinite;"></div>
          </div>
      </div>
      
      <div class="background">
          <img src="assets/Asset 4.svg" alt="Arka Plan" class="background-img" loading="lazy">
          <img src="assets/Asset 5.svg" alt="Siber Güvenlik Başkanlığı" class="logo" loading="lazy">
        <!-- Ana Panel -->
        <div class="center-panel" id="main-panel">
            <div class="main-title-panel">
                <img src="assets/Asset 13.svg" alt="Siber Macera" class="main-title-svg" loading="lazy">
                <div class="inside-panel">
                    <div class="panel-desc">Siber sırları çöz, oyunu kazan, güvende kal!</div>
                    <div class="main-buttons">
                        <img src="assets/Asset 9.svg" alt="Parola Gücü" class="main-btn-svg" loading="lazy">
                        <img src="assets/Asset 10.svg" alt="Paylaş/Sakla" class="main-btn-svg" loading="lazy">
                        <img src="assets/Asset 11.svg" alt="Oltalama Testi" class="main-btn-svg" loading="lazy">
                        <img src="assets/Asset 12.svg" alt="Hemen Başla" class="main-btn-svg start-svg" id="start-btn" loading="lazy">
                    </div>
                </div>
            </div>
        </div>
        <!-- Kullanıcı Adı Paneli -->
        <div class="center-panel" id="username-panel" style="display:none;">
            <div class="main-title-panel">
                <img src="assets/Asset 13.svg" alt="Siber Macera" class="main-title-svg" loading="lazy">
                <div class="inside-panel">
                    <div class="panel-desc">Macaraya başlamak için<br>kod adınızı giriniz.</div>
                    <div class="input-svg-wrapper">
                        <img src="assets/Asset 14.svg" alt="Input Alanı" class="input-svg" loading="lazy">
                        <input type="text" class="username-input-on-svg" placeholder="Kod adınız..." id="username-input">
                    </div>
                    <img src="assets/Asset 15.svg" alt="Oyuna Başla" class="main-btn-svg start-svg" id="play-btn" loading="lazy">
                </div>
            </div>
        </div>
        <!-- Parola Gücü Paneli -->
        <div class="center-panel" id="password-panel" style="display:none;">
            <div class="password-panel-outer">
                <img src="assets/Asset 27.svg" alt="Panel Çerçeve" class="password-panel-bg" loading="lazy">
                <!-- Üst Bilgiler -->
                <div class="password-panel-top">
                  <div class="svg-box">
                    <img src="assets/Asset 28.svg" class="svg-bg" loading="lazy">
                    <div class="svg-text" id="timer">Süre: 00:00</div>
                  </div>
                  <div class="svg-box">
                    <img src="assets/Asset 29.svg" class="svg-bg" loading="lazy">
                    <div class="svg-text">Puan: <span id="score">0</span></div>
                  </div>
                </div>
                <!-- Başlık ve Açıklama -->
                <div class="password-panel-content">
                    <img src="assets/Asset 34.svg" alt="Güvenlik İkonu" class="security-icon" loading="lazy">
                    <div class="password-title">PAROLA GÜCÜ</div>
                    <div class="password-desc" id="password-desc">Parolanızı girin ve gücünü test edin.</div>
                    <div class="input-svg-wrapper password-input-wrapper" id="password-input-wrapper">
                        <img src="assets/Asset 32.svg" alt="Parola Input" class="input-svg" loading="lazy">
                        <input type="password" class="username-input-on-svg password-input" placeholder="Parolanız..." id="password-input-1">
                    </div>
                    <div class="input-svg-wrapper password-input-wrapper" id="password-confirm-wrapper" style="margin-top: 12px;">
                        <img src="assets/Asset 32.svg" alt="Parola Onay Input" class="input-svg" loading="lazy">
                        <input type="password" class="username-input-on-svg password-input" placeholder="Parolayı tekrar girin..." id="password-input-2">
                    </div>
                    <div id="password-match-message" style="display: none; text-align: center; margin: 8px 0; font-size: 0.9rem; color: #ff4444;"></div>
                    <div class="password-check-btn-wrapper" id="password-check-btn-wrapper">
                        <img src="assets/Asset 33.svg" alt="Kontrol Et" class="password-check-btn" id="check-password-btn" loading="lazy">
                    </div>
                    <div class="password-result" id="password-result" style="display:none;">
                        <div id="strength-label"></div>
                        <div id="crack-time"></div>
                        <div id="congrats-message"></div>
                        <div id="next-task-btn" class="next-task-btn" style="display:none;">
                            <img src="assets/Asset 35.svg" alt="Paylaş/Sakla Görevine Geç" loading="lazy">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- PAYLAŞ/SAKLA Paneli -->
        <div class="center-panel" id="share-panel" style="display:none;">
            <div class="password-panel-outer">
                <img src="assets/Asset 27.svg" alt="Panel Çerçeve" class="password-panel-bg">
                <div class="password-panel-top">
                  <div class="svg-box">
                    <img src="assets/Asset 28.svg" class="svg-bg">
                    <div class="svg-text" id="timer-share">Süre: 00:00</div>
                  </div>
                  <div class="svg-box">
                    <img src="assets/Asset 29.svg" class="svg-bg">
                    <div class="svg-text">Puan: <span id="score-share">0</span></div>
                  </div>
                </div>
                <div class="password-panel-content">
                    <img src="assets/Asset 36.svg" alt="Paylaş Sakla İkon" class="security-icon">
                    <div class="password-title">PAYLAŞ/SAKLA</div>
                    <div class="password-desc">Aşağıdaki bilgilerden hangilerini güvenle paylaşabileceğini seç:</div>
                    
                    <div id="share-questions-container" class="share-questions-container">
                        <!-- Sorular buraya dinamik olarak eklenecek -->
                    </div>
                    
                    <div id="continue-to-phishing-btn" class="continue-btn" style="display:block !important; text-align: center; margin-top: 30px; width: 100%; padding: 20px; position: relative; z-index: 100; visibility: visible !important; opacity: 1 !important;" onclick="checkShareAnswers()">
                        <img src="assets/oltalamatestinegec.svg" alt="Oltalama Testine Geç" style="max-width: 350px; width: 100%; cursor: pointer; transition: transform 0.2s ease;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                    </div>
                    
                    <div id="share-results" class="share-results" style="display:none;">
                        <!-- Sonuçlar burada gösterilecek -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- PHISHING TEST Paneli -->
        <div class="center-panel" id="phishing-panel" style="display:none;">
            <div class="password-panel-outer">
                <img src="assets/Asset 27.svg" alt="Panel Çerçeve" class="password-panel-bg">
                <div class="password-panel-top">
                  <div class="svg-box">
                    <img src="assets/Asset 28.svg" class="svg-bg">
                    <div class="svg-text" id="timer-phishing">Süre: 00:00</div>
                  </div>
                  <div class="svg-box">
                    <img src="assets/Asset 29.svg" class="svg-bg">
                    <div class="svg-text">Puan: <span id="score-phishing">0</span></div>
                  </div>
                </div>
                <div class="password-panel-content">
                    <img src="assets/Asset 30.svg" alt="Phishing Test İkon" class="security-icon">
                    <div class="password-title">OLTALAMA TESTİ</div>
                    <div class="password-desc" id="phishing-desc">Instagram şifrenizi güncellemeniz gerekiyor. Buraya tıklayın.<br>Link adresi: insta-security.verify-update.ru</div>
                                         <div class="phishing-buttons-container" style="display: flex; flex-direction: column; gap: 12px; margin-top: 50px; width: 100%; max-width: 600px;">
                                                 <div class="phishing-button" data-answer="wrong" style="position: relative; cursor: pointer;">
                             <img src="assets/Asset 31.svg" style="width: 100%; height: auto; min-height: 60px;">
                             <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-family: 'Gilmer Light', sans-serif; font-size: 1rem; text-align: center; width: 90%; line-height: 1.2;">Link gerçek gibi, tıklarım.</div>
                         </div>
                         <div class="phishing-button" data-answer="correct" style="position: relative; cursor: pointer;">
                             <img src="assets/Asset 31.svg" style="width: 100%; height: auto; min-height: 60px;">
                             <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-family: 'Gilmer Light', sans-serif; font-size: 1rem; text-align: center; width: 90%; line-height: 1.2;">Adres tuhaf, dikkatli olurum.</div>
                         </div>
                         <div class="phishing-button" data-answer="wrong" style="position: relative; cursor: pointer;">
                             <img src="assets/Asset 31.svg" style="width: 100%; height: auto; min-height: 60px;">
                             <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-family: 'Gilmer Light', sans-serif; font-size: 1rem; text-align: center; width: 90%; line-height: 1.2;">Şifreyi yazar geçerim.</div>
                         </div>
                    </div>
                    <div id="phishing-explanation" class="share-explanation"></div>
                </div>
            </div>
        </div>
        
        <!-- FINAL SKOR Paneli -->
        <div class="final-score-wrapper" id="final-score-panel" style="display:none;">
            <div class="final-score-container">
                <img src="assets/Asset 21.svg" alt="Skor Panel Çerçeve" class="final-score-bg">
                <div class="final-score-content">
                    <img src="assets/Asset 23.svg" alt="Yıldız İkon" class="final-score-star">
                    <div class="final-score-title">Tebrikler! Siber Güvenlik Macerasını Tamamladın.</div>

                    <div class="final-score-row">
                        <span>Kullanıcı Adı</span><span id="final-username">İsim</span>
                    </div>
                    <div class="final-score-row">
                        <span>Parola Gücü Ölçme</span><span id="final-password-score">30 Puan</span>
                    </div>
                    <div class="final-score-row">
                        <span>Paylaş/Sakla Görevi</span><span id="final-share-score">190 Puan</span>
                    </div>
                    <div class="final-score-row">
                        <span>Oltalama Testi</span><span id="final-phishing-score">0 Puan</span>
                    </div>
                    <div class="final-score-row bold">
                        <span>Toplam Süre</span><span id="final-total-time">00:34</span>
                    </div>
                    <div class="final-score-row bold total">
                        <span>Toplam Puan</span><span id="final-total-score">220</span>
                    </div>

                    <div class="final-back-btn" id="final-back-btn">
                        <img src="assets/Asset 22.svg" alt="Ana Ekrana Dön">
                    </div>
                </div>
            </div>
        </div>
        
        <!-- SKOR TABLOSU Paneli -->
        <div class="center-panel" id="scoreboard-panel" style="display:none;">
            <div class="password-panel-outer" style="width: 1200px; height: 850px; max-width: 98vw; max-height: 98vh;">
                <img src="assets/Asset 27.svg" alt="Panel Çerçeve" class="password-panel-bg">
                <div class="password-panel-content" style="align-items:center; padding: 40px; top: 120px;">
                    <img src="assets/Asset 6.svg" alt="Skor Tablosu İkonu" class="security-icon" style="width: 70px; height: 70px;">
                    <div class="password-title" style="font-size: 1.5rem;">SİBER GÜVENLİK SKOR TABLOSU</div>
                    <div class="password-desc" style="margin-bottom: 20px; font-size: 1.3rem;">En iyi siber kahramanları keşfedin!</div>
                    
                    <div class="scoreboard-table" style="width: 100%; max-width: 900px; margin: 20px auto;">
                        <div class="scoreboard-header" style="display: flex; background-color: rgba(108, 43, 207, 0.3); padding: 8px 12px; border-radius: 4px; margin-bottom: 3px; font-weight: bold; font-size: 0.9rem; line-height: 1.2;">
                            <span style="flex: 0 0 70px; color: #ffaa00;">Sıra</span>
                            <span style="flex: 1; color: #ffffff;">Kullanıcı Adı</span>
                            <span style="flex: 0 0 140px; color: #ffffff; text-align: center;">Toplam Puan</span>
                            <span style="flex: 0 0 100px; color: #ffffff; text-align: center;">Süre</span>
                            <span style="flex: 0 0 140px; color: #ffffff; text-align: center;">Tarih</span>
                        </div>
                        <div id="scoreboard-list">
                            <!-- Skor listesi burada dinamik olarak oluşturulacak -->
                        </div>
                    </div>
                    
                    <div class="scoreboard-buttons" style="display: flex; gap: 25px; margin-top: 30px;">
                        <img src="assets/Asset 26.svg" alt="Yenile" id="refresh-scoreboard-btn" style="cursor: pointer; max-width: 170px; transition: transform 0.2s ease;">
                        <img src="assets/Asset 22.svg" alt="Ana Menü" id="scoreboard-back-btn" style="cursor: pointer; max-width: 170px; transition: transform 0.2s ease;">
                    </div>
                </div>
            </div>
        </div>
        
        <div class="scoreboard">
            <img src="assets/Asset 6.svg" alt="Skor Tablosu" class="scoreboard-img" loading="lazy">
        </div>
    </div>

    <script>
    // Firebase Configuration - teknofest projesi
    const firebaseConfig = {
        apiKey: "AIzaSyB3ofVngr1rY6Zr2bTSE3PRFT1z104nMXo",
        authDomain: "teknofest-c7a92.firebaseapp.com",
        databaseURL: "https://teknofest-c7a92-default-rtdb.firebaseio.com",
        projectId: "teknofest-c7a92",
        storageBucket: "teknofest-c7a92.firebasestorage.app",
        messagingSenderId: "478655816162",
        appId: "1:478655816162:web:0cb7626d34935611ed59bb",
        measurementId: "G-PG8ZFFEWJP"
    };

    // Firebase'i başlat (sadece geçerli config varsa)
    let database = null;
    let isFirebaseEnabled = false;
    
    // Firebase konfigürasyonunu kontrol et
    if (firebaseConfig.apiKey && firebaseConfig.apiKey !== "AIzaSyExample...") {
        // Firebase'i async olarak başlat
        setTimeout(() => {
            try {
                firebase.initializeApp(firebaseConfig);
                database = firebase.database();
                isFirebaseEnabled = true;
                console.log("✅ Firebase başarıyla bağlandı - Çoklu ekran modu aktif!");
                console.log("🔗 Veritabanı URL:", firebaseConfig.databaseURL);
            
            // Mevcut status div'ini kaldır (temizlik)
            const existingStatus = document.getElementById('firebase-status');
            if (existingStatus) {
                existingStatus.remove();
            }
            
            // Bağlantı testini yap
            database.ref('.info/connected').on('value', function(snapshot) {
                if (snapshot.val() === true) {
                    console.log("🌐 Firebase gerçek zamanlı bağlantı: AKTİF");
                    showFirebaseStatus("🌐 Çoklu ekran modu: AKTİF", "#00ff99");
                } else {
                    console.log("⚠️ Firebase bağlantısı kopuk");
                    showFirebaseStatus("⚠️ Bağlantı kopuk - Yerel mod", "#ffaa00");
                }
            });
            
        } catch (error) {
            console.warn("❌ Firebase bağlantısı başarısız, yerel mod kullanılıyor:", error);
            isFirebaseEnabled = false;
            showFirebaseStatus("💾 Yerel mod - Sadece bu cihaz", "#ffaa00");
        }
        }, 300); // 300ms gecikme ile Firebase'i başlat
    } else {
        console.warn("⚙️ Firebase konfigürasyonu eksik, yerel mod kullanılıyor");
        console.log("📋 Çoklu ekran için FIREBASE_KURULUM.md dosyasını okuyun");
        isFirebaseEnabled = false;
        showFirebaseStatus("⚙️ Firebase kurulum gerekli", "#ff4444");
    }
    
    // Firebase durumunu ekranda göster (gizli mod)
    function showFirebaseStatus(message, color) {
        // Firebase durumu console'da görünsün ama ekranda görünmesin
        if (message.includes("AKTİF")) {
            console.log("🟢 " + message);
        } else if (message.includes("kopuk")) {
            console.log("🟡 " + message);
        } else {
            console.log("🔴 " + message);
        }
        
        // Görsel mesaj gösterme (istenirse aktif edilebilir)
        // Kullanıcı debug yapmak isterse bu kısmı açabilir
    }

    // Custom password analysis functions
    function analyzePassword(password) {
    let charsetSize = 0;
    let usedSets = [];

    if (/[a-z]/.test(password)) {
        charsetSize += 26;
        usedSets.push("Küçük harfler");
    }
    if (/[A-Z]/.test(password)) {
        charsetSize += 26;
        usedSets.push("Büyük harfler");
    }
    if (/[0-9]/.test(password)) {
        charsetSize += 10;
        usedSets.push("Sayılar");
    }
    if (/[^a-zA-Z0-9]/.test(password)) {
        charsetSize += 32;
        usedSets.push("Semboller");
    }

    const length = password.length;
    const totalCombinations = Math.pow(charsetSize, length);

    return { length, charsetSize, usedSets, totalCombinations };
    }

    function calculateCrackTimes(password) {
        // Use zxcvbn for more accurate crack time estimation
        const result = zxcvbn(password);
        
        // Get crack time display from zxcvbn
        let crackTimeDisplay = result.crack_times_display.online_no_throttling_10_per_second;
        if (!crackTimeDisplay || typeof crackTimeDisplay !== 'string') {
            crackTimeDisplay = result.crack_times_display.offline_fast_hashing_1e10_per_second + ' (hızlı hash)';
            if (typeof crackTimeDisplay !== 'string') crackTimeDisplay = 'N/A';
        }
        
        // Localize time units to Turkish
        crackTimeDisplay = crackTimeDisplay
            .replace(/less than a second/gi, '1 saniyeden az')
            .replace(/less than/gi, 'den az')
            .replace(/centuries/gi, 'yüzyıl')
            .replace(/century/gi, 'yüzyıl')
            .replace(/years?/gi, 'yıl')
            .replace(/year/gi, 'yıl')
            .replace(/months?/gi, 'ay')
            .replace(/month/gi, 'ay')
            .replace(/days?/gi, 'gün')
            .replace(/day/gi, 'gün')
            .replace(/hours?/gi, 'saat')
            .replace(/hour/gi, 'saat')
            .replace(/minutes?/gi, 'dakika')
            .replace(/minute/gi, 'dakika')
            .replace(/seconds?/gi, 'saniye')
            .replace(/second/gi, 'saniye')
            .replace(/instantly/gi, 'anında')
            .replace(/instant/gi, 'anında');
            
        return {
            crackTimeDisplay: crackTimeDisplay,
            score: result.score,
            feedback: result.feedback
        };
    }

    function getStrengthLevel(score) {
        const strengthLevels = {
            0: 'Çok Zayıf',
            1: 'Zayıf', 
            2: 'Orta',
            3: 'İyi',
            4: 'Çok Güçlü'
        };
        return strengthLevels[score] || 'Bilinmiyor';
    }   
    

    function getStrengthColor(strength) {
        switch(strength) {
            case "Çok Zayıf": return "#FF0000";
            case "Zayıf": return "#FF4500";
            case "Orta": return "#FFAA00";
            case "İyi": return "#32CD32";
            case "Çok Güçlü": return "#008000";
            default: return "#FFFFFF";
        }
    }

    function getStrengthPoints(strength) {
        switch(strength) {
            case "Çok Zayıf": return 0;
            case "Zayıf": return 10;
            case "Orta": return 20;
            case "İyi": return 40;
            case "Çok Güçlü": return 50;
            default: return 0;
        }
    }

    // Zaman ve puan yönetimi
    let timerInterval;
    let timeLeft = 0;
    let totalScore = 0;
    let timerStarted = false;
    let currentUsername = ''; // Kullanıcı adı
    
    // Bölüm skorları
    let passwordScore = 0;
    let shareScore = 0;
    let phishingScore = 0;
    
    // Çoklu Ekran Skor Sistemi (Firebase + LocalStorage Hybrid)
    function saveScore(username, score, time) {
        const newScore = {
            username: username,
            score: score,
            time: time,
            date: new Date().toLocaleDateString('tr-TR'),
            timestamp: Date.now(),
            deviceId: getDeviceId()
        };
        
        if (isFirebaseEnabled) {
            // Firebase'e kaydet (tüm ekranlar görebilsin)
            saveScoreToFirebase(newScore);
        } else {
            // Yerel olarak kaydet
            saveScoreLocally(newScore);
        }
    }
    
    function saveScoreToFirebase(newScore) {
        try {
            // Firebase'e yeni skoru ekle
            const scoresRef = database.ref('scores');
            scoresRef.push(newScore).then(() => {
                console.log("Skor Firebase'e başarıyla kaydedildi");
                
                // Skor limitini kontrol et ve eski skorları temizle
                scoresRef.orderByChild('score').limitToLast(600).once('value', (snapshot) => {
                    const allScores = [];
                    snapshot.forEach((child) => {
                        allScores.push({ key: child.key, ...child.val() });
                    });
                    
                    // Sıralama: önce puan, sonra süre
                    allScores.sort((a, b) => {
                        if (b.score !== a.score) {
                            return b.score - a.score;
                        }
                        const timeA = convertTimeToSeconds(a.time);
                        const timeB = convertTimeToSeconds(b.time);
                        return timeA - timeB;
                    });
                    
                    // En fazla 500 skoru tut, fazlasını sil
                    if (allScores.length > 500) {
                        const toDelete = allScores.slice(500);
                        toDelete.forEach(scoreToDelete => {
                            scoresRef.child(scoreToDelete.key).remove();
                        });
                    }
                });
            }).catch((error) => {
                console.error("Firebase'e skor kaydedilemedi:", error);
                // Hata durumunda yerel olarak kaydet
                saveScoreLocally(newScore);
            });
        } catch (error) {
            console.error("Firebase kaydetme hatası:", error);
            saveScoreLocally(newScore);
        }
    }
    
    function saveScoreLocally(newScore) {
        const scores = getLocalScores();
        scores.push(newScore);
        
        scores.sort((a, b) => {
            if (b.score !== a.score) {
                return b.score - a.score;
            }
            const timeA = convertTimeToSeconds(a.time);
            const timeB = convertTimeToSeconds(b.time);
            return timeA - timeB;
        });
        
        // En fazla 50 skor tut (offline backup için)
        if (scores.length > 50) {
            scores.splice(50);
        }
        
        localStorage.setItem('cyberScores', JSON.stringify(scores));
    }
    
    function getScores() {
        if (isFirebaseEnabled) {
            return getScoresFromFirebase();
        } else {
            return Promise.resolve(getLocalScores());
        }
    }
    
    function getScoresFromFirebase() {
        return new Promise((resolve, reject) => {
            try {
                const scoresRef = database.ref('scores');
                scoresRef.orderByChild('score').limitToLast(600).once('value', (snapshot) => {
                    const scores = [];
                    snapshot.forEach((child) => {
                        scores.push(child.val());
                    });
                    
                    // Sıralama: önce puan, sonra süre
                    scores.sort((a, b) => {
                        if (b.score !== a.score) {
                            return b.score - a.score;
                        }
                        const timeA = convertTimeToSeconds(a.time);
                        const timeB = convertTimeToSeconds(b.time);
                        return timeA - timeB;
                    });
                    
                    resolve(scores);
                }, (error) => {
                    console.error("Firebase'den skorlar alınamadı:", error);
                    // Hata durumunda yerel skorları döndür
                    resolve(getLocalScores());
                });
            } catch (error) {
                console.error("Firebase okuma hatası:", error);
                resolve(getLocalScores());
            }
        });
    }
    
    function getLocalScores() {
        const scores = localStorage.getItem('cyberScores');
        return scores ? JSON.parse(scores) : [];
    }
    
    // Her cihaz için benzersiz ID oluştur
    function getDeviceId() {
        let deviceId = localStorage.getItem('deviceId');
        if (!deviceId) {
            deviceId = 'device_' + Math.random().toString(36).substr(2, 9) + '_' + Date.now();
            localStorage.setItem('deviceId', deviceId);
        }
        return deviceId;
    }
    
    // Ana oyun skorboard'u için ekran boyutuna göre maksimum skor sayısı (Artırılmış)
    function getMaxDisplayScores() {
        const screenHeight = window.innerHeight;
        const screenWidth = window.innerWidth;
        
        // 500+ skor optimizasyonu - büyük turnuva için daha fazla skor gösterimi
        if (screenWidth >= 1400 && screenHeight >= 900) {
            return 50; // Büyük ekran - 50 skor (500+ destekli)
        } else if (screenWidth >= 1200 && screenHeight >= 768) {
            return 35; // Orta büyük ekran - 35 skor
        } else if (screenWidth >= 900 && screenHeight >= 600) {
            return 25; // Orta ekran - 25 skor
        } else if (screenWidth >= 600) {
            return 20; // Küçük ekran - 20 skor
        } else {
            return 15; // Çok küçük ekran - 15 skor
        }
    }
    
    function convertTimeToSeconds(timeString) {
        const parts = timeString.split(':');
        return parseInt(parts[0]) * 60 + parseInt(parts[1]);
    }
    
    function displayScoreboard() {
        const scoreboardList = document.getElementById('scoreboard-list');
        
        // Yükleniyor mesajı göster
        scoreboardList.innerHTML = '<div style="text-align: center; color: #ffaa00; padding: 20px;">📊 Skorlar yükleniyor...</div>';
        
        getScores().then(scores => {
            if (scores.length === 0) {
                scoreboardList.innerHTML = '<div style="text-align: center; color: #cccccc; padding: 20px;">Henüz kayıtlı skor yok.</div>';
                return;
            }
            
            scoreboardList.innerHTML = '';
            
            // Ekran boyutuna göre gösterilecek skor sayısını belirle
            const maxDisplayScores = getMaxDisplayScores();
            const displayScores = scores.slice(0, maxDisplayScores);
            
            displayScores.forEach((score, index) => {
                const row = document.createElement('div');
                row.className = 'scoreboard-row';
                if (index === 0) row.classList.add('top-score');
                
                // Device indicator ekle
                const deviceIndicator = score.deviceId ? 
                    `<span style="font-size: 0.7rem; color: #888; margin-left: 5px;">📱</span>` : '';
                
                row.innerHTML = `
                    <span class="scoreboard-rank">${index + 1}</span>
                    <span class="scoreboard-name">${score.username}${deviceIndicator}</span>
                    <span class="scoreboard-score">${score.score}</span>
                    <span class="scoreboard-time">${score.time}</span>
                    <span class="scoreboard-date">${score.date}</span>
                `;
                
                scoreboardList.appendChild(row);
            });
            
            // Firebase durumu console'da yazdır (ekranda görünmez)
            if (isFirebaseEnabled) {
                console.log('🌐 Çoklu ekran modu aktif - Tüm cihazlardan skorlar');
            } else {
                console.log('💾 Yerel mod - Sadece bu cihazın skorları');
            }
        }).catch(error => {
            console.error('Skorlar yüklenirken hata:', error);
            scoreboardList.innerHTML = '<div style="text-align: center; color: #ff4444; padding: 20px;">❌ Skorlar yüklenemedi. Tekrar deneyin.</div>';
        });
    }
    
    // Ana oyunda gerçek zamanlı skorboard için dinleyici kurulumu
    function setupGameRealtimeScoreboard() {
        if (isFirebaseEnabled) {
            console.log("🎮 Ana oyun: Gerçek zamanlı skorboard dinleyicisi başlatılıyor...");
            const scoresRef = database.ref('scores');
            
            // Skorboard açık olduğunda gerçek zamanlı güncelleme
            scoresRef.on('value', function(snapshot) {
                // Sadece skorboard paneli açıksa güncelle
                const scoreboardPanel = document.getElementById('scoreboard-panel');
                if (scoreboardPanel && scoreboardPanel.style.display !== 'none') {
                    console.log("🔄 Ana oyun: Skorboard gerçek zamanlı güncellendi");
                    displayScoreboard();
                }
            });
            
            console.log("✅ Ana oyun: Gerçek zamanlı skorboard hazır!");
        }
    }

    function startTimer() {
        if (timerStarted) return;
        timerStarted = true;
        timeLeft = 0;
        updateTimer();
        timerInterval = setInterval(() => {
            timeLeft++;
            updateTimer();
        }, 1000);
    }

    function stopTimer() {
        clearInterval(timerInterval);
        timerStarted = false;
    }

    function updateTimer() {
        const min = String(Math.floor(timeLeft / 60)).padStart(2, '0');
        const sec = String(timeLeft % 60).padStart(2, '0');
        const timeText = `Süre: ${min}:${sec}`;
        
        // Tüm timer elementlerini güncelle
        const timerElements = ['timer', 'timer-share', 'timer-phishing'];
        timerElements.forEach(id => {
            const element = document.getElementById(id);
            if (element) {
                element.textContent = timeText;
            }
        });
    }

    function setScore(val) {
        totalScore = val;
        
        // Tüm skor elementlerini güncelle
        const scoreElements = ['score', 'score-share', 'score-phishing'];
        scoreElements.forEach(id => {
            const element = document.getElementById(id);
            if (element) {
                element.textContent = totalScore;
            }
        });
    }

    function addScore(val) {
        totalScore += val;
        
        // Tüm skor elementlerini güncelle
        const scoreElements = ['score', 'score-share', 'score-phishing'];
        scoreElements.forEach(id => {
            const element = document.getElementById(id);
            if (element) {
                element.textContent = totalScore;
            }
        });
    }

    document.getElementById('start-btn').onclick = function() {
        document.getElementById('main-panel').style.display = 'none';
        document.getElementById('username-panel').style.display = 'flex';
        // Username input'una odaklan
        setTimeout(() => {
            document.getElementById('username-input').focus();
        }, 100);
    };

    document.getElementById('play-btn').onclick = function() {
        const usernameInput = document.getElementById('username-input');
        const username = usernameInput.value.trim();
        
        // İsim kontrolü - boş olmamalı
        if (!username || username.length === 0) {
            alert('Lütfen kod adınızı giriniz!');
            usernameInput.focus(); // Input alanına odaklan
            return; // İsim girilmemişse devam etme
        }
        
        // İsim çok kısa olmamalı
        if (username.length < 2) {
            alert('Kod adınız en az 2 karakter olmalıdır!');
            usernameInput.focus();
            return;
        }
        
        // İsim çok uzun olmamalı
        if (username.length > 20) {
            alert('Kod adınız en fazla 20 karakter olabilir!');
            usernameInput.focus();
            return;
        }
        
        // Username'i global değişkene kaydet
        currentUsername = username;
        
        document.getElementById('username-panel').style.display = 'none';
        document.getElementById('password-panel').style.display = 'flex';
        startTimer();
        setScore(0);
        
        // Parola inputları için event listener ekle
        setupPasswordValidation();
    };

    // Enter tuşu ile de oyuna başlayabilme
    document.getElementById('username-input').addEventListener('keyup', function(event) {
        if (event.key === 'Enter') {
            document.getElementById('play-btn').click();
        }
    });

    function setupPasswordValidation() {
        const password1 = document.getElementById('password-input-1');
        const password2 = document.getElementById('password-input-2');
        const button = document.getElementById('check-password-btn');
        const message = document.getElementById('password-match-message');

        function validatePasswords() {
            const pass1 = password1.value;
            const pass2 = password2.value;
            
            // Eğer her iki alan da boşsa hiçbir şey gösterme
            if (!pass1 && !pass2) {
                message.textContent = '';
                button.style.opacity = '0.5';
                button.style.pointerEvents = 'none';
                return;
            }
            
            // Eğer sadece birinci alan doluysa
            if (pass1 && !pass2) {
                message.textContent = 'Lütfen parolayı tekrar girin';
                message.style.color = '#ffaa00';
                button.style.opacity = '0.5';
                button.style.pointerEvents = 'none';
                return;
            }
            
            // Her iki alan da doluysa kontrol et
            if (pass1 && pass2) {
                if (pass1 === pass2) {
                    if (pass1.length > 12) {
                        message.textContent = 'Parola 12 karakterden uzun olamaz!';
                        message.style.color = '#ff4444';
                        button.style.opacity = '0.5';
                        button.style.pointerEvents = 'none';
                    } else {
                        message.textContent = 'Parolalar eşleşiyor ✓';
                        message.style.color = '#39b54a';
                        button.style.opacity = '1';
                        button.style.pointerEvents = 'auto';
                    }
                } else {
                    message.textContent = 'Parolalar eşleşmiyor!';
                    message.style.color = '#ff4444';
                    button.style.opacity = '0.5';
                    button.style.pointerEvents = 'none';
                }
            }
        }

        // Her iki input'a da event listener ekle
        password1.addEventListener('input', validatePasswords);
        password2.addEventListener('input', validatePasswords);
        
        // Enter tuşu ile kontrol (sadece parolalar eşleşiyorsa)
        password1.addEventListener('keyup', function(event) {
            if (event.key === 'Enter' && button.style.pointerEvents === 'auto') {
                button.click();
            }
        });
        password2.addEventListener('keyup', function(event) {
            if (event.key === 'Enter' && button.style.pointerEvents === 'auto') {
                button.click();
            }
        });
    }

    document.getElementById('check-password-btn').onclick = function() {
        const password = document.getElementById('password-input-1').value;
        const confirmPassword = document.getElementById('password-input-2').value;
        
        // Eğer parolalar eşleşmiyorsa işlem yapma
        if (!password || !confirmPassword || password !== confirmPassword) {
            return;
        }
        
        if (password.length > 12) {
            alert('Parola 12 karakterden uzun olamaz!');
            return;
        }

        // Input kutularını ve açıklama metnini gizle
        document.getElementById('password-desc').style.display = 'none';
        document.getElementById('password-input-wrapper').style.display = 'none';
        document.getElementById('password-confirm-wrapper').style.display = 'none';
        document.getElementById('password-match-message').style.display = 'none';
        document.getElementById('password-check-btn-wrapper').style.display = 'none';
        
        // Use zxcvbn for accurate password analysis (like in old code)
        const result = calculateCrackTimes(password);
        const strength = getStrengthLevel(result.score);
        const color = getStrengthColor(strength);
        const points = getStrengthPoints(strength);
        
        passwordScore = points; // Parola puanını kaydet
        addScore(points);
        
        // Parola gücüne göre ses çal
        playPasswordStrengthSound(strength);
        
        document.getElementById('password-result').style.display = 'flex';
        document.getElementById('password-result').innerHTML = `
            <div id="strength-label"><span class="strength-badge" style="background:${color};color:#fff;">Güç: ${strength}</span></div>
            <div id="crack-time">⚡ Kırılma Süresi: ${result.crackTimeDisplay}</div>
            <div id="congrats-message">Tebrikler! Parolanızın gücünü test ettiniz.</div>
            <div id="password-tips" style="
                background: linear-gradient(135deg, rgba(0, 255, 153, 0.1), rgba(51, 255, 153, 0.1));
                border: 1px solid rgba(0, 255, 153, 0.3);
                border-radius: 8px;
                padding: 2px;
                margin: 10px 0;
                font-size: 0.8rem;
                line-height: 1.2;
                color: #ffffff;
                text-align: center;
                max-width: 90%;
                margin-left: auto;
                margin-right: auto;
            ">
                <div style="color: #00ff99; font-weight: bold; margin-bottom: 5px;">
                    🔐 Güçlü Parola İpuçları
                </div>
                <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 8px; font-size: 0.75rem;">
                    <span style="background: rgba(0,255,153,0.2); padding: 3px 6px; border-radius: 4px;">12+ karakter</span>
                    <span style="background: rgba(0,255,153,0.2); padding: 3px 6px; border-radius: 4px;">A-z karışımı</span>
                    <span style="background: rgba(0,255,153,0.2); padding: 3px 6px; border-radius: 4px;">0-9 rakamlar</span>
                    <span style="background: rgba(0,255,153,0.2); padding: 3px 6px; border-radius: 4px;">!@#$ semboller</span>
                </div>
                <div style="color: #ffaa00; font-size: 0.7rem; margin-top: 5px;">
                    ⚠️ Kişisel bilgilerden kaçının!
                </div>
            </div>
            <div id="next-task-btn" class="next-task-btn" style="display:block;">
                <img src="assets/Asset 35.svg" alt="Paylaş/Sakla Görevine Geç">
            </div>
        `;
        
        // Şifre gücüne göre crack-time için CSS sınıfı ekle
        const crackTimeElement = document.getElementById('crack-time');
        if (crackTimeElement) {
            // Mevcut sınıfları temizle
            crackTimeElement.className = '';
            
            // Şifre gücüne göre sınıf ekle
            switch(strength) {
                case 'Çok Zayıf':
                    crackTimeElement.classList.add('very-weak');
                    break;
                case 'Zayıf':
                    crackTimeElement.classList.add('weak');
                    break;
                case 'Orta':
                    crackTimeElement.classList.add('medium');
                    break;
                case 'İyi':
                    crackTimeElement.classList.add('good');
                    break;
                case 'Çok Güçlü':
                    crackTimeElement.classList.add('very-strong');
                    break;
            }
        }
    };

    // PAYLAŞ/SAKLA butonuna tıklanınca panel geçişi
    document.addEventListener('click', function(e) {
        if (e.target.closest('#next-task-btn')) {
            document.getElementById('password-panel').style.display = 'none';
            document.getElementById('share-panel').style.display = 'flex';
            
            // Yeni share panel sistemini başlat
            displayShareQuestions();
        }
        
                                  // Phishing testine geçiş butonu
         if (e.target.closest('#phishing-test-btn')) {
             document.getElementById('share-panel').style.display = 'none';
             document.getElementById('phishing-panel').style.display = 'flex';
             
             // İlk phishing sorusunu başlat
             currentPhishingQuestion = 0;
             showNextPhishingQuestion();
         }
         
         // Ana ekrana dön butonu
         if (e.target.closest('#final-back-btn')) {
             // Final skor panelini gizle
             document.getElementById('final-score-panel').style.display = 'none';
             
             // Tüm panelleri gizle
             document.getElementById('main-panel').style.display = 'none';
             document.getElementById('password-panel').style.display = 'none';
             document.getElementById('share-panel').style.display = 'none';
             document.getElementById('phishing-panel').style.display = 'none';
             document.getElementById('scoreboard-panel').style.display = 'none';
             
             // Ana menü panelini göster
             document.getElementById('main-panel').style.display = 'flex';
             
             // Kullanıcı adı input'unu temizle
             const usernameInput = document.getElementById('username-input');
             if (usernameInput) {
                 usernameInput.value = '';
             }
             
             // Oyunu tamamen sıfırla
             totalScore = 0;
             passwordScore = 0;
             shareScore = 0;
             phishingScore = 0;
             timeLeft = 0;
             timerStarted = false;
             currentPhishingQuestion = 0;
             
             // Timer'ı durdur
             if (timerInterval) {
                 clearInterval(timerInterval);
                 timerInterval = null;
             }
             
             // Parola panelini sıfırla
             const passwordInput = document.getElementById('password-input-1');
             const confirmPasswordInput = document.getElementById('password-input-2');
             if (passwordInput) passwordInput.value = '';
             if (confirmPasswordInput) confirmPasswordInput.value = '';
             
             // Parola kontrol butonunu sıfırla
             const checkBtn = document.getElementById('check-password-btn');
             const checkBtnWrapper = document.getElementById('password-check-btn-wrapper');
             if (checkBtn) {
                 checkBtn.style.opacity = '1';
                 checkBtn.style.pointerEvents = 'auto';
                 checkBtn.style.display = 'block';
                 checkBtn.style.visibility = 'visible';
                 checkBtn.style.cursor = 'pointer';
             }
             if (checkBtnWrapper) {
                 checkBtnWrapper.style.display = 'flex';
                 checkBtnWrapper.style.visibility = 'visible';
                 checkBtnWrapper.style.opacity = '1';
                 checkBtnWrapper.style.pointerEvents = 'auto';
                 checkBtnWrapper.style.position = 'relative';
                 checkBtnWrapper.style.zIndex = '2';
             }
             
             // Parola match mesajını temizle
             const matchMessage = document.getElementById('password-match-message');
             if (matchMessage) {
                 matchMessage.textContent = '';
             }
             
             // Input wrapper'ları göster
             const passwordWrapper = document.getElementById('password-input-wrapper');
             const confirmWrapper = document.getElementById('password-confirm-wrapper');
             if (passwordWrapper) passwordWrapper.style.display = 'flex';
             if (confirmWrapper) confirmWrapper.style.display = 'flex';
             
             // Açıklamayı sıfırla
             const passwordDesc = document.getElementById('password-desc');
             if (passwordDesc) {
                 passwordDesc.textContent = 'Parolanızı girin ve gücünü test edin.';
             }
             
             // Parola güç sonuçlarını temizle
             const strengthLabel = document.getElementById('strength-label');
             const crackTime = document.getElementById('crack-time');
             const congratsMessage = document.getElementById('congrats-message');
             if (strengthLabel) strengthLabel.textContent = '';
             if (crackTime) crackTime.textContent = '';
             if (congratsMessage) congratsMessage.textContent = '';
             
             // Parola sonuçlarını temizle
             const passwordResult = document.querySelector('.password-result');
             if (passwordResult) passwordResult.style.display = 'none';
             
             const nextTaskBtn = document.getElementById('next-task-btn');
             if (nextTaskBtn) nextTaskBtn.style.display = 'none';
             
             // Share panel'ı sıfırla (yeni sistem)
             selectedAnswers = {};
             shareQuestionsDisplayed = false;
             
             // Share panel öğelerini temizle
             const shareContainer = document.getElementById('share-questions-container');
             const shareResults = document.getElementById('share-results');
             const shareSubmitBtn = document.getElementById('continue-to-phishing-btn');
             
             if (shareContainer) shareContainer.innerHTML = '';
             if (shareResults) {
                 shareResults.style.display = 'none';
                 shareResults.innerHTML = '';
             }
             if (shareSubmitBtn) shareSubmitBtn.style.display = 'block';
             
             // Share panel açıklamasını sıfırla
             const shareDesc = document.querySelector('#share-panel .password-desc');
             if (shareDesc) {
                 shareDesc.textContent = 'Aşağıdaki bilgilerden hangilerini güvenle paylaşabileceğini seç:';
             }
             
             // Phishing panel'ı sıfırla
             currentPhishingQuestion = 0;
             
             // Phishing panel açıklamasını temizle
                 const phishingExplanation = document.getElementById('phishing-explanation');
    if (phishingExplanation) {
        phishingExplanation.textContent = '';
        phishingExplanation.className = 'share-explanation';
    }
             
             // Phishing butonlarını sıfırla
             const phishingButtons = document.querySelectorAll('.phishing-button');
             phishingButtons.forEach(btn => {
                 btn.style.pointerEvents = 'auto';
                 btn.style.opacity = '1';
                 btn.style.transform = 'scale(1)';
             });
             
             // Skor ve timer'ı sıfırla
             setScore(0);
             updateTimer();
             
             // Skor tablosunu güncelle
             const scoreElements = ['score', 'score-share', 'score-phishing'];
             scoreElements.forEach(id => {
                 const element = document.getElementById(id);
                 if (element) {
                     element.textContent = '0';
                 }
             });
         }
        
                 // Phishing test butonları
         if (e.target.closest('.phishing-button')) {
             const button = e.target.closest('.phishing-button');
             const isCorrect = button.getAttribute('data-answer') === 'correct';
             const explanation = document.getElementById('phishing-explanation');
             
             console.log("🎯 Phishing buton tıklandı:", {
                 currentQuestion: currentPhishingQuestion,
                 isCorrect: isCorrect,
                 questionText: phishingQuestions[currentPhishingQuestion]?.text
             });
             
             // Phishing ses efektini çal
             playPhishingSound(isCorrect);
             
             if (isCorrect) {
                 phishingScore += 10;
                 addScore(10);
                 explanation.innerHTML = phishingQuestions[currentPhishingQuestion].explanation.replace(/\n+/g, '<br>');
                 explanation.className = 'share-explanation correct';
                 console.log("✅ Doğru cevap! +10 puan");
             } else {
                 phishingScore -= 5;
                 addScore(-5);
                 explanation.innerHTML = phishingQuestions[currentPhishingQuestion].explanation.replace(/\n+/g, '<br>');
                 explanation.className = 'share-explanation wrong';
                 console.log("❌ Yanlış cevap! -5 puan");
             }
             
             // Butonları devre dışı bırak
             const allButtons = document.querySelectorAll('.phishing-button');
             allButtons.forEach(btn => {
                 btn.style.pointerEvents = 'none';
                 btn.style.opacity = '0.7';
                 btn.style.transform = 'none';
             });
             
                         // 4 saniye sonra bir sonraki soruya geç (çocukların açıklamayı okuyabilmesi için)
            setTimeout(() => {
                currentPhishingQuestion++;
                console.log("⏭️ Sonraki soruya geçiliyor:", currentPhishingQuestion);
                showNextPhishingQuestion();
            }, 4000);
         }
    });

    // Phishing butonları için hover efekti - KALDIRILDI
    // Hiç efekt yok artık

    // PHISHING TEST - Çoklu Soru Sistemi
    let phishingQuestions = [
        {
            text: "YouTube'da yorum görüyorsun:\n'Bu kanala abone ol, ilk 100 kişiye iPhone hediye!\nLink profilimde'Ne yaparsın?",
            options: [
                { text: "Profiline gidip linke tıklarım", correct: false },
                { text: "Sahte olduğunu düşünür, tıklamam", correct: true },
                { text: "Arkadaşlarıma da gönderir herkesi uyarırım", correct: false }
            ],
            explanation: "YouTube yorumlarındaki hediye linkler genellikle sahte.\nGerçek kanallar böyle hediye vermez."
        },
        {
            text: "WhatsApp'ta arkadaşından mesaj geliyor:\n'Bu linke tıkla çok komik video var: bit.ly/xyz123'Ne yaparsın?",
            options: [
                { text: "Arkadaşımdan geldiği için güvenle tıklarım", correct: false },
                { text: "Önce arkadaşıma sorarak doğruluğunu kontrol ederim", correct: true },
                { text: "Hemen tıklarım, arkadaşım gönderdi sonuçta", correct: false }
            ],
            explanation: "Arkadaşının hesabı çalınmış olabilir.\nŞüpheli linkler için önce kişiyi arayıp doğrulamak en iyisi."
        },
        {
            text: "Telefonunda açılır pencere çıkıyor:\n'DİKKAT! Telefonunuz virüslü. Hemen temizlemek için TIKLA'Ne yaparsın?",
            options: [
                { text: "Hemen tıklarım, telefonum tehlikede", correct: false },
                { text: "Bu sahte bir uyarı, kapatırım", correct: true },
                { text: "Tıklayıp virüs programını indiririm", correct: false }
            ],
            explanation: "Açılır pencere virüs uyarıları genellikle sahte.\nTelefonlar böyle uyarı vermez, güvenlik uygulamanız verir."
        },
        {
            text: "Instagram'dan DM geliyor:\n'Şifren çalındı! Hesabını kurtarmak için buraya git: insta-guvenlik.com'\nNe yaparsın?",
            options: [
                { text: "Linke tıklamam, Instagram uygulamasından kontrol ederim", correct: true },
                { text: "Hemen linke tıklayıp şifremi değiştiririm", correct: false },
                { text: "Mesajdaki linke tıklayıp bilgilerimi veririm", correct: false }
            ],
            explanation: "Gerçek Instagram'ın adresi instagram.com'dur.\nSahte siteler farklı adresler kullanır. Her zaman resmi uygulamayı kullan."
        },
        {
            text: "Discord'da tanımadığın biri mesaj atıyor:\n'Bedava Roblox/Minecraft premium hesap istiyorsan şifreni yaz'\nNe yaparsın?",
            options: [
                { text: "Bedava hesap için şifremi veririm", correct: false },
                { text: "Bu bir tuzak, engellerim ve bildiririm", correct: true },
                { text: "Arkadaşlarıma da söylerim belki onlar da ister", correct: false }
            ],
            explanation: "Asla kimseyle oyun şifrelerini paylaşma!\nBedava hesap vaadiyle bilgilerini çalmaya çalışıyorlar."
        }
    ];
    
    let currentPhishingQuestion = 0;
    
    function showNextPhishingQuestion() {
        console.log("🎯 Phishing soru gösteriliyor:", currentPhishingQuestion);
        
        // DOM elementlerinin varlığını kontrol et
        const desc = document.getElementById('phishing-desc');
        const buttons = document.querySelectorAll('.phishing-button');
        const explanation = document.getElementById('phishing-explanation');
        
        if (!desc || buttons.length === 0) {
            console.error("❌ Phishing DOM elementleri bulunamadı! Tekrar deneniyor...");
            // 500ms sonra tekrar dene
            setTimeout(() => {
                showNextPhishingQuestion();
            }, 500);
            return;
        }
        
        if (currentPhishingQuestion >= phishingQuestions.length) {
            console.log("✅ Tüm phishing soruları tamamlandı");
            // Tüm sorular tamamlandı
            desc.textContent = 'Tebrikler! Phishing testini tamamladın!';
            
            // Butonları gizle
            const container = document.querySelector('.phishing-buttons-container');
            if (container) {
                container.style.display = 'none';
            }
            
            // Açıklama göster
            if (explanation) {
                explanation.innerHTML = `
                    <div style="color: #ffffff; font-size: 1rem;">Oyun tamamlandı!</div>
                `;
            }
            
            // 0.9 saniye sonra final skor panelini göster
            setTimeout(() => {
                showFinalScorePanel();
            }, 900);
            return;
        }
        
        const question = phishingQuestions[currentPhishingQuestion];
        console.log("📝 Gösterilen soru:", question.text);
        
        // Soruyu güncelle
        desc.innerHTML = question.text.replace(/\n/g, '<br>');
        
        // Butonları güncelle
        buttons.forEach((button, index) => {
            if (index < question.options.length) {
                // Text div'ini bul veya oluştur
                let textDiv = button.querySelector('div');
                if (!textDiv) {
                    // Eğer div yoksa oluştur
                    textDiv = document.createElement('div');
                    textDiv.style.cssText = 'position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-family: "Gilmer Light", sans-serif; font-size: 1rem; text-align: center; width: 90%; line-height: 1.2;';
                    button.appendChild(textDiv);
                }
                
                textDiv.textContent = question.options[index].text;
                button.setAttribute('data-answer', question.options[index].correct ? 'correct' : 'wrong');
                button.style.pointerEvents = 'auto';
                button.style.opacity = '1';
                button.style.transform = 'scale(1)';
                button.style.display = 'block';
                
                console.log(`🔘 Buton ${index + 1}:`, question.options[index].text);
            } else {
                button.style.display = 'none';
            }
        });
        
        // Açıklamayı temizle
        if (explanation) {
            explanation.innerHTML = '';
            explanation.className = 'share-explanation';
        }
        
        // Container'ı görünür yap
        const container = document.querySelector('.phishing-buttons-container');
        if (container) {
            container.style.display = 'flex';
        }
        
        console.log("✅ Phishing sorusu başarıyla yüklendi");
        
        // İlk soru başarıyla yüklendiyse timeout'u iptal et
        if (currentPhishingQuestion === 0 && window.phishingTimeoutId) {
            clearTimeout(window.phishingTimeoutId);
            window.phishingTimeoutId = null;
            console.log("✅ Phishing test timeout iptal edildi - başarıyla yüklendi");
        }
    }
     
     // Final skor panelini göster
     function showFinalScorePanel() {
         // Zafer sesini çal
         playFinalVictorySound();
         
         // Phishing panelini gizle
         document.getElementById('phishing-panel').style.display = 'none';
         
         // Final skor panelini göster
         document.getElementById('final-score-panel').style.display = 'flex';
         
         // Kullanıcı adını al
         const username = currentUsername || 'Kullanıcı';
         
         // Süreyi hesapla
         const min = String(Math.floor(timeLeft / 60)).padStart(2, '0');
         const sec = String(timeLeft % 60).padStart(2, '0');
         const totalTime = `${min}:${sec}`;
         
         // Verileri doldur
         document.getElementById('final-username').textContent = username;
         document.getElementById('final-password-score').textContent = passwordScore + ' Puan';
         document.getElementById('final-share-score').textContent = shareScore + ' Puan';
         document.getElementById('final-phishing-score').textContent = phishingScore + ' Puan';
         document.getElementById('final-total-time').textContent = totalTime;
         document.getElementById('final-total-score').textContent = totalScore;
         
         // Skoru kaydet
         saveScore(username, totalScore, totalTime);
         
         // Timer'ı durdur
         stopTimer();
     }

    // PAYLAŞ/SAKLA paneli - 10 Soru Sistemi
    let shareQuestions = [
        { text: 'Adın ve Soyadın', shareable: false, explanation: 'Adınız ve soyadınız kişisel kimliğinizle doğrudan bağlantılıdır, internette tanımadığınız kişilerle paylaşmaktan kaçının.' },
        { text: 'En sevdiğin renk', shareable: true, explanation: 'Renk tercihin seni tanımlar ama kişisel gizliliğini tehlikeye atmaz.' },
        { text: 'E-posta adresin', shareable: false, explanation: 'E-posta adresiniz kimlik avı (oltalama) saldırıları için kullanılabilir. Güvenmediğiniz kişilerle paylaşmaktan kaçının.' },
        { text: 'Telefon numaran', shareable: false, explanation: 'Telefon numaranız paylaşıldığında istenmeyen aramalar, mesajlar veya dolandırıcılık girişimlerine yol açabilir.' },
        { text: 'Hobin (örneğin futbol)', shareable: true, explanation: 'Hobiler ve ilgi alanları ortak noktası olan insanlarla bağlantı kurmanın güvenli bir yoludur.' },
        { text: 'TC kimlik numaran', shareable: false, explanation: 'Kimlik numaran çok özel bir bilgidir. Dolandırıcılık ve kimlik hırsızlığı için kullanılabilir, asla paylaşma.' },
        { text: 'En sevdiğin film', shareable: true, explanation: 'Film zevkin güvenle paylaşılabilir ve yeni arkadaşlıklar kurman için ortak konu olabilir.' },
        { text: 'Ev adresin', shareable: false, explanation: 'Ev adresiniz fiziksel güvenliğinizle ilgilidir. İnternette asla tanımadığınız kişilerle paylaşılmamalıdır.' },
        { text: 'En sevdiğin spor', shareable: true, explanation: 'Spor tercihlerin güvenle paylaşılabilir ve yeni arkadaşlıklar kurmen için faydalı olabilir.' },
        { text: 'Sosyal medya şifren', shareable: false, explanation: 'Şifreler asla paylaşılmamalıdır. Hesaplarının güvenliği için kritiktir.' }
    ];

    let selectedAnswers = {};
    let shareQuestionsDisplayed = false;

    // Parola gücüne göre ses efektleri
    function playPasswordStrengthSound(strength) {
        // Mobil vibrasyon deseni
        const vibrationPatterns = {
            'Çok Zayıf': [300, 150, 300, 150, 300, 150, 300], // SİREN TİTREŞİMİ - uzun alarm benzeri
            'Zayıf': [100, 50, 100, 50, 100, 50, 100], // HIZLI ALARM TİTREŞİMİ
            'Orta': [100, 50, 100], // Hafif titreşim
            'İyi': [40, 20, 40, 20, 60, 30, 40, 20, 80], // CIVILTILI TİTREŞİM - tweet benzeri ritim
            'Çok Güçlü': [30, 20, 30, 20, 30, 20, 30] // Çok hafif, ritmik
        };

        // Web Audio API ile ses üretimi
        try {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            if (audioContext.state === 'suspended') {
                audioContext.resume();
            }

            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            // Parola gücüne göre ses parametreleri
            let duration, volume;
            
            switch(strength) {
                case 'Çok Zayıf':
                    // SİREN ALARM - Güvenlik alarmı benzeri
                    oscillator.type = 'sawtooth';
                    duration = 1.2;
                    volume = 0.18;
                    
                    // Gerçek siren efekti - yavaş yukarı aşağı
                    oscillator.frequency.setValueAtTime(400, audioContext.currentTime);
                    oscillator.frequency.exponentialRampToValueAtTime(1200, audioContext.currentTime + 0.3);
                    oscillator.frequency.exponentialRampToValueAtTime(400, audioContext.currentTime + 0.6);
                    oscillator.frequency.exponentialRampToValueAtTime(1200, audioContext.currentTime + 0.9);
                    oscillator.frequency.exponentialRampToValueAtTime(400, audioContext.currentTime + 1.2);
                    
                    // İkinci oscilator ile daha güçlü siren
                    const sirenOsc2 = audioContext.createOscillator();
                    const sirenGain2 = audioContext.createGain();
                    sirenOsc2.connect(sirenGain2);
                    sirenGain2.connect(audioContext.destination);
                    
                    sirenOsc2.type = 'square';
                    sirenOsc2.frequency.setValueAtTime(600, audioContext.currentTime);
                    sirenOsc2.frequency.exponentialRampToValueAtTime(1000, audioContext.currentTime + 0.3);
                    sirenOsc2.frequency.exponentialRampToValueAtTime(600, audioContext.currentTime + 0.6);
                    sirenOsc2.frequency.exponentialRampToValueAtTime(1000, audioContext.currentTime + 0.9);
                    sirenOsc2.frequency.exponentialRampToValueAtTime(600, audioContext.currentTime + 1.2);
                    
                    sirenGain2.gain.setValueAtTime(0.1, audioContext.currentTime);
                    sirenGain2.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 1.2);
                    
                    sirenOsc2.start(audioContext.currentTime);
                    sirenOsc2.stop(audioContext.currentTime + 1.2);
                    break;
                    
                case 'Zayıf':
                    // UYARI SİRENİ - Kısa alarm benzeri
                    oscillator.type = 'square';
                    duration = 0.8;
                    volume = 0.15;
                    
                    // Hızlı alarm efekti - wee-woo-wee-woo
                    oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                    oscillator.frequency.setValueAtTime(600, audioContext.currentTime + 0.1);
                    oscillator.frequency.setValueAtTime(800, audioContext.currentTime + 0.2);
                    oscillator.frequency.setValueAtTime(600, audioContext.currentTime + 0.3);
                    oscillator.frequency.setValueAtTime(800, audioContext.currentTime + 0.4);
                    oscillator.frequency.setValueAtTime(600, audioContext.currentTime + 0.5);
                    oscillator.frequency.setValueAtTime(800, audioContext.currentTime + 0.6);
                    oscillator.frequency.setValueAtTime(600, audioContext.currentTime + 0.7);
                    break;
                    
                case 'Orta':
                    // NÖTR SES - Düşük frekanslı, yumuşak
                    oscillator.type = 'sine';
                    duration = 0.4;
                    volume = 0.08;
                    oscillator.frequency.setValueAtTime(300, audioContext.currentTime);
                    break;
                    
                case 'İyi':
                    // CIVILTILI SES - Kuş benzeri neşeli melodi
                    oscillator.type = 'sine';
                    duration = 0.9;
                    volume = 0.12;
                    
                    // Tweet-tweet benzeri cıvıltı melodisi
                    oscillator.frequency.setValueAtTime(600, audioContext.currentTime); // İlk tweet
                    oscillator.frequency.exponentialRampToValueAtTime(800, audioContext.currentTime + 0.1);
                    oscillator.frequency.setValueAtTime(700, audioContext.currentTime + 0.2); // İkinci tweet
                    oscillator.frequency.exponentialRampToValueAtTime(900, audioContext.currentTime + 0.3);
                    oscillator.frequency.setValueAtTime(650, audioContext.currentTime + 0.4); // Üçüncü tweet
                    oscillator.frequency.exponentialRampToValueAtTime(850, audioContext.currentTime + 0.5);
                    oscillator.frequency.setValueAtTime(750, audioContext.currentTime + 0.6); // Final tweet
                    oscillator.frequency.exponentialRampToValueAtTime(950, audioContext.currentTime + 0.75);
                    
                    // İkinci oscilator ile daha cıvıltılı efekt
                    const chirpOsc = audioContext.createOscillator();
                    const chirpGain = audioContext.createGain();
                    chirpOsc.connect(chirpGain);
                    chirpGain.connect(audioContext.destination);
                    
                    chirpOsc.type = 'triangle';
                    chirpOsc.frequency.setValueAtTime(1000, audioContext.currentTime + 0.15);
                    chirpOsc.frequency.exponentialRampToValueAtTime(1200, audioContext.currentTime + 0.25);
                    chirpOsc.frequency.setValueAtTime(1100, audioContext.currentTime + 0.35);
                    chirpOsc.frequency.exponentialRampToValueAtTime(1300, audioContext.currentTime + 0.45);
                    chirpOsc.frequency.setValueAtTime(1150, audioContext.currentTime + 0.55);
                    chirpOsc.frequency.exponentialRampToValueAtTime(1350, audioContext.currentTime + 0.7);
                    
                    chirpGain.gain.setValueAtTime(0.06, audioContext.currentTime + 0.1);
                    chirpGain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.8);
                    
                    chirpOsc.start(audioContext.currentTime + 0.1);
                    chirpOsc.stop(audioContext.currentTime + 0.8);
                    break;
                    
                case 'Çok Güçlü':
                    // BAŞARI SESİ - Melodik, pozitif
                    oscillator.type = 'sine';
                    duration = 0.8;
                    volume = 0.12;
                    
                    // Müzikal akor etkisi
                    oscillator.frequency.setValueAtTime(523, audioContext.currentTime); // C
                    oscillator.frequency.setValueAtTime(659, audioContext.currentTime + 0.2); // E
                    oscillator.frequency.setValueAtTime(783, audioContext.currentTime + 0.4); // G
                    oscillator.frequency.setValueAtTime(1046, audioContext.currentTime + 0.6); // C yüksek
                    break;
                    
                default:
                    oscillator.type = 'sine';
                    duration = 0.3;
                    volume = 0.1;
                    oscillator.frequency.setValueAtTime(400, audioContext.currentTime);
            }

            gainNode.gain.setValueAtTime(volume, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);

            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + duration);

        } catch (e) {
            console.log('Web Audio hatası:', e);
        }

        // Mobil titreşim
        if (navigator.vibrate && vibrationPatterns[strength]) {
            navigator.vibrate(vibrationPatterns[strength]);
        }

        // Konsol feedback
        const emojis = {
            'Çok Zayıf': '🚨🔴',
            'Zayıf': '⚠️🟠',
            'Orta': '🔶🟡',
            'İyi': '🐦🎵',
            'Çok Güçlü': '🎉🌟'
        };
        console.log(`${emojis[strength]} Parola Gücü: ${strength} - SES ÇALINDI!`);
    }

    // Phishing test için özel ses efektleri
    function playPhishingSound(isCorrect) {
        try {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            if (audioContext.state === 'suspended') {
                audioContext.resume();
            }

            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            if (isCorrect) {
                // DOĞRU CEVAP - Net başarı sesi (ding-ding!)
                oscillator.type = 'sine';
                gainNode.gain.setValueAtTime(0.15, audioContext.currentTime);
                
                // İki telli başarı sesi - DING DING!
                oscillator.frequency.setValueAtTime(800, audioContext.currentTime); // Yüksek ding
                oscillator.frequency.setValueAtTime(800, audioContext.currentTime + 0.1);
                oscillator.frequency.setValueAtTime(1200, audioContext.currentTime + 0.2); // Daha yüksek ding
                
                // Net fade out
                gainNode.gain.setValueAtTime(0.15, audioContext.currentTime);
                gainNode.gain.setValueAtTime(0.15, audioContext.currentTime + 0.1);
                gainNode.gain.setValueAtTime(0.12, audioContext.currentTime + 0.2);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.45);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.45);
                
                // İkinci oscilator için echo efekti
                const oscillator2 = audioContext.createOscillator();
                const gainNode2 = audioContext.createGain();
                oscillator2.connect(gainNode2);
                gainNode2.connect(audioContext.destination);
                
                oscillator2.type = 'triangle';
                oscillator2.frequency.setValueAtTime(1000, audioContext.currentTime + 0.1);
                oscillator2.frequency.setValueAtTime(1400, audioContext.currentTime + 0.25);
                gainNode2.gain.setValueAtTime(0.08, audioContext.currentTime + 0.1);
                gainNode2.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.4);
                
                oscillator2.start(audioContext.currentTime + 0.1);
                oscillator2.stop(audioContext.currentTime + 0.4);
                
                // Başarı titreşimi
                if (navigator.vibrate) {
                    navigator.vibrate([30, 20, 50]);
                }
                
                console.log('✅ Phishing: Doğru cevap!');
                
            } else {
                // YANLIŞ CEVAP - Buzzer, uyarı sesi
                oscillator.type = 'square';
                gainNode.gain.setValueAtTime(0.15, audioContext.currentTime);
                
                // Buzzer efekti - düşük frekanslı alarm
                oscillator.frequency.setValueAtTime(150, audioContext.currentTime);
                oscillator.frequency.setValueAtTime(100, audioContext.currentTime + 0.15);
                oscillator.frequency.setValueAtTime(150, audioContext.currentTime + 0.3);
                
                // Keskin fade out
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.5);
                
                // Uyarı titreşimi
                if (navigator.vibrate) {
                    navigator.vibrate([150, 100, 150]);
                }
                
                console.log('❌ Phishing: Yanlış cevap!');
            }

        } catch (e) {
            console.log('Phishing ses hatası:', e);
        }
    }

    // Final kutlama sesi - Parti müziği
    function playFinalVictorySound() {
        try {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            if (audioContext.state === 'suspended') {
                audioContext.resume();
            }

            // KUTLAMA MÜZİĞİ - "Ta-ta-ta-TAAAA!" benzeri
            const celebrationNotes = [
                { freq: 784, time: 0.0, duration: 0.15, volume: 0.18 }, // G5 - Ta!
                { freq: 880, time: 0.2, duration: 0.15, volume: 0.18 }, // A5 - Ta!
                { freq: 988, time: 0.4, duration: 0.15, volume: 0.18 }, // B5 - Ta!
                { freq: 1175, time: 0.6, duration: 0.6, volume: 0.22 }, // D6 - TAAAA!
                
                // İkinci dalga - daha yüksek
                { freq: 1175, time: 1.0, duration: 0.1, volume: 0.15 }, // D6
                { freq: 1319, time: 1.2, duration: 0.1, volume: 0.15 }, // E6
                { freq: 1568, time: 1.4, duration: 0.4, volume: 0.2 },  // G6 - FINAL!
            ];

            celebrationNotes.forEach((note) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.type = 'triangle';
                oscillator.frequency.setValueAtTime(note.freq, audioContext.currentTime + note.time);
                
                // Daha keskin attack - kutlama hissi
                gainNode.gain.setValueAtTime(0, audioContext.currentTime + note.time);
                gainNode.gain.linearRampToValueAtTime(note.volume, audioContext.currentTime + note.time + 0.02);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + note.time + note.duration);
                
                oscillator.start(audioContext.currentTime + note.time);
                oscillator.stop(audioContext.currentTime + note.time + note.duration);
            });

            // KONFETI EFEKTİ - Rastgele yüksek frekanslı sesler
            for (let i = 0; i < 8; i++) {
                const confettiOsc = audioContext.createOscillator();
                const confettiGain = audioContext.createGain();
                
                confettiOsc.connect(confettiGain);
                confettiGain.connect(audioContext.destination);
                
                confettiOsc.type = 'sine';
                const randomFreq = 1500 + Math.random() * 1000; // 1500-2500 Hz arası
                const randomTime = 0.8 + Math.random() * 0.8; // 0.8-1.6 saniye arası
                
                confettiOsc.frequency.setValueAtTime(randomFreq, audioContext.currentTime + randomTime);
                confettiGain.gain.setValueAtTime(0.03, audioContext.currentTime + randomTime);
                confettiGain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + randomTime + 0.1);
                
                confettiOsc.start(audioContext.currentTime + randomTime);
                confettiOsc.stop(audioContext.currentTime + randomTime + 0.1);
            }

            // DAVUL BEAT - Kutlama ritmi
            const drumBeats = [0.0, 0.6, 1.0, 1.4];
            drumBeats.forEach((time) => {
                const drumOsc = audioContext.createOscillator();
                const drumGain = audioContext.createGain();
                
                drumOsc.connect(drumGain);
                drumGain.connect(audioContext.destination);
                
                drumOsc.type = 'square';
                drumOsc.frequency.setValueAtTime(80, audioContext.currentTime + time); // Bas davul
                
                drumGain.gain.setValueAtTime(0.12, audioContext.currentTime + time);
                drumGain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + time + 0.1);
                
                drumOsc.start(audioContext.currentTime + time);
                drumOsc.stop(audioContext.currentTime + time + 0.1);
            });

            // KUTLAMA TİTREŞİMİ - Parti benzeri
            if (navigator.vibrate) {
                navigator.vibrate([100, 50, 100, 50, 200, 100, 300, 100, 100, 50, 150]);
            }

            console.log('🎉🎊 KUTLAMA! Siber güvenlik kahramanı oldun! 🎊🎉');

        } catch (e) {
            console.log('Kutlama ses hatası:', e);
        }
    }

    // Eski buzzer fonksiyonu (Share bölümünde hala kullanılıyor)
    function playBuzzerSound() {
        try {
            const ctx = new (window.AudioContext || window.webkitAudioContext)();
            if (ctx.state === 'suspended') {
                ctx.resume();
            }
            
            const osc = ctx.createOscillator();
            const gain = ctx.createGain();
            
            osc.connect(gain);
            gain.connect(ctx.destination);
            
            osc.frequency.value = 200;
            osc.type = 'square';
            gain.gain.value = 0.1;
            
            osc.start();
            osc.stop(ctx.currentTime + 0.3);
        } catch (e) {
            console.log('Web Audio hatası:', e);
        }
        
        if (navigator.vibrate) {
            navigator.vibrate([100, 50, 100]);
        }
        
        console.log('\x07');
    }
    
    // Başarı sesi fonksiyonu (Share bölümü doğru seçimler için)
    function playSuccessSound() {
        try {
            const ctx = new (window.AudioContext || window.webkitAudioContext)();
            if (ctx.state === 'suspended') {
                ctx.resume();
            }
            
            const osc = ctx.createOscillator();
            const gain = ctx.createGain();
            
            osc.connect(gain);
            gain.connect(ctx.destination);
            
            // Pozitif müzikal ton - C major akor benzeri
            osc.frequency.setValueAtTime(523, ctx.currentTime); // C5
            osc.frequency.setValueAtTime(659, ctx.currentTime + 0.1); // E5
            osc.frequency.setValueAtTime(783, ctx.currentTime + 0.2); // G5
            
            osc.type = 'sine';
            gain.gain.setValueAtTime(0.08, ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.4);
            
            osc.start();
            osc.stop(ctx.currentTime + 0.4);
            
        } catch (e) {
            console.log('Başarı sesi hatası:', e);
        }
        
        // Pozitif titreşim
        if (navigator.vibrate) {
            navigator.vibrate([30, 20, 50]);
        }
        
        console.log('✅ Doğru seçim!');
    }
    
    // Yeni share panel fonksiyonları
    function displayShareQuestions() {
        if (shareQuestionsDisplayed) return;
        
        const container = document.getElementById('share-questions-container');
        const resultsDiv = document.getElementById('share-results');
        
        // Temizle
        container.innerHTML = '';
        resultsDiv.style.display = 'none';
        resultsDiv.innerHTML = '';
        
        shareQuestions.forEach((question, index) => {
            const questionDiv = document.createElement('div');
            questionDiv.className = 'share-question-item';
            questionDiv.textContent = question.text;
            questionDiv.setAttribute('data-index', index);
            
            questionDiv.addEventListener('click', function() {
                const questionIndex = this.getAttribute('data-index');
                toggleQuestionSelection(questionIndex, this);
            });
            
            container.appendChild(questionDiv);
        });
        
        // Gönderme butonunu göster ve stil ver
        const submitBtn = document.getElementById('continue-to-phishing-btn');
        if (submitBtn) {
            submitBtn.style.display = 'block !important';
            submitBtn.style.opacity = '1';
            submitBtn.style.visibility = 'visible';
            submitBtn.style.position = 'relative';
            submitBtn.style.zIndex = '100';
            submitBtn.style.width = '100%';
            submitBtn.style.textAlign = 'center';
            submitBtn.style.marginTop = '30px';
            submitBtn.style.padding = '20px';
        }
        shareQuestionsDisplayed = true;
    }
    
    function toggleQuestionSelection(index, element) {
        if (selectedAnswers[index]) {
            // Seçimi kaldır
            delete selectedAnswers[index];
            element.classList.remove('selected', 'correct', 'wrong');
            
            // Açıklamayı temizle
            clearExplanation();
        } else {
            // Seçim yap
            selectedAnswers[index] = true;
            element.classList.add('selected');
            
            // Hemen kontrol et - doğru mu yanlış mı?
            const question = shareQuestions[index];
            const shouldBeSelected = question.shareable === true;
            
            if (shouldBeSelected) {
                // Doğru seçim - PUAN ARTTIR ve SES ÇAL!
                element.classList.add('correct');
                shareScore += 30;
                addScore(30);
                playSuccessSound();
            } else {
                // Yanlış seçim - PUAN DÜŞÜR, SES ÇAL ve açıklama göster!
                element.classList.add('wrong');
                shareScore -= 15; // Yanlış cevap için puan düşür
                addScore(-15);
                playBuzzerSound();
                showExplanation(question.explanation, false);
            }
        }
        
        // Submit butonunu al
        const submitBtn = document.getElementById('continue-to-phishing-btn');
        
        // Tüm 10 soruya cevap verildi mi kontrol et
        if (Object.keys(selectedAnswers).length === shareQuestions.length) {
            // Tüm sorular cevaplandı - buton kullanıma hazır (turuncu efekt yok)
            console.log("✅ Tüm sorular cevaplandı - Phishing testine geçebilirsiniz!");
        }
    }
    
    function showExplanation(text, isCorrect) {
        // Mevcut açıklamayı kaldır
        const existingModal = document.getElementById('explanation-modal');
        if (existingModal) {
            existingModal.remove();
        }
        
        // Merkezi açıklama modalı oluştur
        const modalHTML = `
            <div id="explanation-modal" style="
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                z-index: 1000;
                background: rgba(0, 0, 0, 0.9);
                color: ${isCorrect ? '#00ff99' : '#ff4444'};
                border: 3px solid ${isCorrect ? '#00ff99' : '#ff4444'};
                border-radius: 12px;
                padding: 20px 30px;
                max-width: 500px;
                width: 90vw;
                text-align: center;
                font-size: 1.1rem;
                line-height: 1.5;
                box-shadow: 0 0 30px rgba(0, 0, 0, 0.8);
                animation: modalFadeIn 0.3s ease-out;
            ">
                <div style="font-size: 1.3rem; font-weight: bold; margin-bottom: 10px;">
                    ${isCorrect ? '✅ DOĞRU SEÇİM!' : '❌ YANLIŞ SEÇİM!'}
                </div>
                <div style="color: #ffffff; line-height: 1.4;">
                    ${text}
                </div>
                <div style="margin-top: 15px; font-size: 0.9rem; color: #aaa;">
                    Bu mesaj 5 saniye sonra kaybolacak...
                </div>
            </div>
        `;
        
        // Body'ye ekle
        document.body.insertAdjacentHTML('beforeend', modalHTML);
        
        // 5 saniye sonra kaldır (çocukların okuyabileceği süre)
        setTimeout(() => {
            const modal = document.getElementById('explanation-modal');
            if (modal) {
                modal.style.animation = 'modalFadeOut 0.3s ease-in';
                setTimeout(() => modal.remove(), 300);
            }
        }, 5000);
    }
    
    function clearExplanation() {
        // Modal'ı kaldır
        const modal = document.getElementById('explanation-modal');
        if (modal) {
            modal.remove();
        }
        
        // Share results div'ini de temizle
        const explanationDiv = document.getElementById('share-results');
        if (explanationDiv) {
            explanationDiv.style.display = 'none';
            explanationDiv.innerHTML = '';
        }
    }
    
    function showCompletionMessage() {
        // Mevcut modalı kaldır
        clearExplanation();
        
        // Özel tamamlama modalı
        const modalHTML = `
            <div id="explanation-modal" style="
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                z-index: 1000;
                background: linear-gradient(135deg, #1a472a, #0f2817);
                color: #00ff99;
                border: 3px solid #00ff99;
                border-radius: 15px;
                padding: 25px 35px;
                max-width: 550px;
                width: 90vw;
                text-align: center;
                font-size: 1.1rem;
                line-height: 1.5;
                box-shadow: 0 0 40px rgba(0, 255, 153, 0.3);
                animation: modalFadeIn 0.5s ease-out;
            ">
                <div style="font-size: 1.8rem; margin-bottom: 15px;">
                    🎉 TEBRİKLER! 🎉
                </div>
                <div style="font-size: 1.2rem; font-weight: bold; margin-bottom: 10px; color: #fff;">
                    Tüm 10 soruyu cevapladınız!
                </div>
                <div style="color: #ffffff; line-height: 1.4; margin-bottom: 15px;">
                    Phishing testine geçmek için aşağıdaki <strong>"Phishing Testine Geç"</strong> butonuna tıklayın.
                </div>
                <div style="font-size: 0.9rem; color: #aaa;">
                    Bu mesaj 0.9 saniye sonra kaybolacak...
                </div>
            </div>
        `;
        
        // Body'ye ekle
        document.body.insertAdjacentHTML('beforeend', modalHTML);
        
        // 0.9 saniye sonra kaldır
        setTimeout(() => {
            const modal = document.getElementById('explanation-modal');
            if (modal) {
                modal.style.animation = 'modalFadeOut 0.3s ease-in';
                setTimeout(() => modal.remove(), 300);
            }
        }, 900);
    }
    
        function checkShareAnswers() {
        // Basit tamamlanma mesajı göster
        showCompletionModal();
    }
    
    function showCompletionModal() {
        // Mevcut modalları kaldır
        clearExplanation();
        
        // Tamamlama modalı
        const modalHTML = `
            <div id="explanation-modal" style="
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                z-index: 1000;
                max-width: 700px;
                width: 85vw;
                min-height: 400px;
                text-align: center;
                font-size: 1.3rem;
                line-height: 1.5;
                animation: modalFadeIn 0.5s ease-out;
            ">
                <img src="assets/Asset 43.svg" alt="Modal Çerçeve" style="
                    position: absolute;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    z-index: 0;
                    pointer-events: none;
                ">
                <div style="
                    position: relative;
                    z-index: 1;
                    padding: 50px 40px;
                    color: #ffffff;
                ">
                <div style="margin-bottom: 30px;">
                    <img src="assets/Asset 46.svg" alt="Soru İşareti" style="max-width: 60px; height: auto;">
                </div>
                <div style="font-size: 1.1rem; font-weight: bold; margin-bottom: 15px; color: #fff;">
                    Bölümü bitirmek istediğinize emin misiniz?
                </div>
                <div style="color: #ffffff; line-height: 1.3; margin-bottom: 20px; font-size: 0.9rem;">
                    Bu işlemden sonra oltalama testine geçeceksiniz.
                </div>
                <div style="margin-top: 20px; display: flex; gap: 15px; justify-content: center; align-items: center; flex-wrap: nowrap;">
                    <img src="assets/Asset 60.svg" alt="Geç" onclick="continueToPhishing()" style="
                        max-width: 90px;
                        cursor: pointer;
                        transition: transform 0.2s ease;
                    " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                    
                    <img src="assets/Asset 61.svg" alt="Geçme" onclick="cancelToPhishing()" style="
                        max-width: 90px;
                        cursor: pointer;
                        transition: transform 0.2s ease;
                    " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                </div>
                </div>
            </div>
        `;
        
        // Body'ye ekle
        document.body.insertAdjacentHTML('beforeend', modalHTML);
    }
    
    function continueToPhishing() {
        // Modal'ı kaldır
        clearExplanation();
        
        // Phishing testine geç
        showPhishingPanel();
    }
    
    function cancelToPhishing() {
        // Modal'ı kaldır
        clearExplanation();
        
        // Paylaş/sakla bölümünde kal - hiçbir şey yapma, modal sadece kapansın
        console.log("👤 Kullanıcı phishing testine geçmek istemedi, paylaş/sakla bölümünde kalıyor");
    }
    
    // Phishing test acil durumu - eğer test tamamen çökerse kullan
    window.emergencySkipPhishing = function() {
        console.log("🚨 Acil durum: Phishing test atlanıyor");
        
        // Puanları sıfırla
        phishingScore = 0;
        
        // Final skora geç
        setTimeout(() => {
            showFinalScorePanel();
        }, 800);
    };
    
    // Phishing test debug fonksiyonu
    window.debugPhishingTest = function() {
        console.log("🔍 Phishing Test Hata Ayıklama Bilgileri:");
        console.log("- Mevcut Soru:", currentPhishingQuestion);
        console.log("- Toplam Soru:", phishingQuestions.length);
        console.log("- Phishing Puanı:", phishingScore);
        
        const desc = document.getElementById('phishing-desc');
        const buttons = document.querySelectorAll('.phishing-button');
        const explanation = document.getElementById('phishing-explanation');
        const panel = document.getElementById('phishing-panel');
        
        console.log("- Açıklama Öğesi:", desc ? "✅ Bulundu" : "❌ Eksik");
        console.log("- Buton Sayısı:", buttons.length);
        console.log("- Açıklama Öğesi:", explanation ? "✅ Bulundu" : "❌ Eksik");
        console.log("- Panel Görünür:", panel && panel.style.display !== 'none' ? "✅ Görünür" : "❌ Gizli");
        
        buttons.forEach((btn, index) => {
            const textDiv = btn.querySelector('div');
            console.log(`- Buton ${index + 1}:`, {
                hasText: textDiv ? "✅ Metin div'i var" : "❌ Metin div'i yok",
                text: textDiv ? textDiv.textContent : "Yok",
                answer: btn.getAttribute('data-answer')
            });
        });
        
        if (buttons.length === 0) {
            console.log("🚨 Hiç buton bulunamadı! emergencySkipPhishing() çalıştırın.");
        }
    };
    

    
    // Yükleme ekranını gizle
    window.addEventListener('load', function() {
        setTimeout(function() {
            const loadingScreen = document.getElementById('loading-screen');
            if (loadingScreen) {
                loadingScreen.style.opacity = '0';
                loadingScreen.style.transition = 'opacity 0.5s ease-out';
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                }, 500);
            }
        }, 800); // 0.8 saniye bekle
    });
    
    document.addEventListener('DOMContentLoaded', function() {
        var btnYes = document.getElementById('btn-share-yes');
        var btnNo = document.getElementById('btn-share-no');
        var explanation = document.getElementById('share-explanation');
        
        // Skor tablosu butonları
        const scoreboardBtn = document.querySelector('.scoreboard-img').parentElement;
        if (scoreboardBtn) {
            scoreboardBtn.onclick = function() {
                // Yeni pencerede skor tablosunu aç
                openScoreboardWindow();
            };
        }
        
        // Yeni pencerede skor tablosu açma fonksiyonu
        function openScoreboardWindow() {
            const screenWidth = window.screen.width;
            const screenHeight = window.screen.height;
            const windowWidth = Math.min(1400, screenWidth * 0.9);
            const windowHeight = Math.min(900, screenHeight * 0.9);
            const left = (screenWidth - windowWidth) / 2;
            const top = (screenHeight - windowHeight) / 2;
            
            const scoreboardWindow = window.open(
                'scoreboard.html',
                'scoreboardWindow',
                `width=${windowWidth},height=${windowHeight},left=${left},top=${top},resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=no,status=no`
            );
            
            if (scoreboardWindow) {
                scoreboardWindow.focus();
            } else {
                // Popup engellenirse fallback olarak aynı pencerede aç
                alert('Popup engellendi! Skor tablosunu aynı pencerede açıyorum.');
                // Tüm panelleri gizle
                document.getElementById('main-panel').style.display = 'none';
                document.getElementById('username-panel').style.display = 'none';
                document.getElementById('password-panel').style.display = 'none';
                document.getElementById('share-panel').style.display = 'none';
                document.getElementById('phishing-panel').style.display = 'none';
                document.getElementById('final-score-panel').style.display = 'none';
                
                // Skor tablosu panelini göster
                document.getElementById('scoreboard-panel').style.display = 'flex';
                displayScoreboard();
            }
        }
        
        // Skor tablosu yenile butonu
        const refreshBtn = document.getElementById('refresh-scoreboard-btn');
        if (refreshBtn) {
            refreshBtn.onclick = function() {
                displayScoreboard();
            };
        }
        
        // Skor tablosu ana menü butonu
        const scoreboardBackBtn = document.getElementById('scoreboard-back-btn');
        if (scoreboardBackBtn) {
            scoreboardBackBtn.onclick = function() {
                document.getElementById('scoreboard-panel').style.display = 'none';
                document.getElementById('main-panel').style.display = 'flex';
            };
        }
        
        // Firebase gerçek zamanlı skorboard sistemini başlat
        setTimeout(() => {
            setupGameRealtimeScoreboard();
        }, 800);
        
                 // Yeni share panel event listeners
         const submitAnswersBtn = document.getElementById('continue-to-phishing-btn');
         if (submitAnswersBtn) {
             submitAnswersBtn.onclick = function() {
                 // Her durumda sonuç ekranını göster
                 checkShareAnswers();
             };
         }
        
                 // Share panel fonksiyonu - phishing'ten geri dönüş için
         window.showSharePanel = function() {
             document.getElementById('password-panel').style.display = 'none';
             document.getElementById('phishing-panel').style.display = 'none';
             document.getElementById('share-panel').style.display = 'flex';
             displayShareQuestions();
         };
         
         // Phishing panel fonksiyonu
         window.showPhishingPanel = function() {
             console.log("🎮 Phishing paneline geçiliyor...");
             
             document.getElementById('share-panel').style.display = 'none';
             document.getElementById('phishing-panel').style.display = 'flex';
             
             // İlk phishing sorusunu başlat
             currentPhishingQuestion = 0;
             
             // 5 saniye timeout - eğer phishing test 5 saniyede yüklenmezse atla
             const timeoutId = setTimeout(() => {
                 console.log("⏰ Phishing test yükleme timeout - otomatik atlama");
                 const desc = document.getElementById('phishing-desc');
                 if (desc) {
                     desc.innerHTML = 'Teknik sorun nedeniyle test atlanıyor...<br>Final skora geçiliyor.';
                 }
                 setTimeout(() => {
                     emergencySkipPhishing();
                 }, 800);
             }, 5000);
             
             // Global olarak sakla (başarılı yüklendiğinde iptal etmek için)
             window.phishingTimeoutId = timeoutId;
             
             // DOM'un tam yüklenmesini bekle
             setTimeout(() => {
                 console.log("🚀 Phishing test başlatılıyor...");
                 initializePhishingTest();
             }, 100);
         };
         
         // Phishing test başlatma fonksiyonu
         function initializePhishingTest() {
             console.log("🔧 Phishing test initialize ediliyor...");
             
             // Phishing panel'ının görünür olduğunu kontrol et
             const phishingPanel = document.getElementById('phishing-panel');
             if (!phishingPanel || phishingPanel.style.display === 'none') {
                 console.error("❌ Phishing panel görünür değil!");
                 return;
             }
             
             // Tüm phishing butonlarının mevcut olduğunu kontrol et
             const buttons = document.querySelectorAll('.phishing-button');
             if (buttons.length === 0) {
                 console.error("❌ Phishing butonları bulunamadı!");
                 return;
             }
             
             // Butonları temizle ve hazırla
             buttons.forEach((button, index) => {
                 button.style.display = 'block';
                 button.style.pointerEvents = 'auto';
                 button.style.opacity = '1';
                 button.style.transform = 'scale(1)';
                 
                 // Div yoksa oluştur
                 let textDiv = button.querySelector('div');
                 if (!textDiv) {
                     textDiv = document.createElement('div');
                     textDiv.style.cssText = 'position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-family: "Gilmer Light", sans-serif; font-size: 1rem; text-align: center; width: 90%; line-height: 1.2;';
                     button.appendChild(textDiv);
                 }
             });
             
             console.log(`✅ ${buttons.length} phishing butonu hazırlandı`);
             
             // İlk soruyu göster
             currentPhishingQuestion = 0;
             showNextPhishingQuestion();
         };
    });

    // PWA Service Worker Registration
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', async () => {
            try {
                const registration = await navigator.serviceWorker.register('./sw.js');
                console.log('✅ Service Worker registered successfully:', registration.scope);
                
                // Enable kiosk mode features
                if (registration.active) {
                    registration.active.postMessage({
                        type: 'ENABLE_KIOSK_MODE'
                    });
                }
            } catch (error) {
                console.log('❌ Service Worker registration failed:', error);
            }
        });

        // Listen for service worker messages
        navigator.serviceWorker.addEventListener('message', event => {
            if (event.data && event.data.type === 'KIOSK_MODE_ENABLED') {
                enableKioskRestrictions(event.data.restrictions);
            }
        });
    }

    // Kiosk Mode Functions
    function enableKioskRestrictions(restrictions) {
        console.log('🔒 Kiosk mode restrictions enabled');
        
        if (restrictions.preventRightClick) {
            document.addEventListener('contextmenu', e => e.preventDefault());
        }
        
        if (restrictions.preventSelection) {
            document.addEventListener('selectstart', e => e.preventDefault());
            document.addEventListener('dragstart', e => e.preventDefault());
        }
        
        if (restrictions.preventDevTools) {
            // Disable F12, Ctrl+Shift+I, Ctrl+U etc.
            document.addEventListener('keydown', function(e) {
                // F12
                if (e.keyCode === 123) {
                    e.preventDefault();
                    return false;
                }
                // Ctrl+Shift+I, Ctrl+Shift+J, Ctrl+U
                if (e.ctrlKey && e.shiftKey && (e.keyCode === 73 || e.keyCode === 74)) {
                    e.preventDefault();
                    return false;
                }
                if (e.ctrlKey && e.keyCode === 85) {
                    e.preventDefault();
                    return false;
                }
                // Ctrl+Shift+C
                if (e.ctrlKey && e.shiftKey && e.keyCode === 67) {
                    e.preventDefault();
                    return false;
                }
            });
        }
        
        if (restrictions.fullscreen) {
            // Auto-enter fullscreen on tablets
            requestFullscreen();
        }
    }

    // Fullscreen functions
    function requestFullscreen() {
        const elem = document.documentElement;
        if (elem.requestFullscreen) {
            elem.requestFullscreen();
        } else if (elem.webkitRequestFullscreen) {
            elem.webkitRequestFullscreen();
        } else if (elem.msRequestFullscreen) {
            elem.msRequestFullscreen();
        }
    }

    // Auto-fullscreen for kiosk mode
    function enableAutoFullscreen() {
        // Detect if running on tablet
        const isTablet = window.innerWidth >= 768 && window.innerWidth <= 1024;
        const isStandalone = window.navigator.standalone || window.matchMedia('(display-mode: standalone)').matches;
        
        if (isTablet || isStandalone) {
            // Auto-enter fullscreen after user interaction
            document.addEventListener('click', function enableFullscreen() {
                requestFullscreen();
                document.removeEventListener('click', enableFullscreen);
            }, { once: true });
        }
    }

    // Wake lock for kiosk mode (prevent screen from sleeping)
    let wakeLock = null;

    async function requestWakeLock() {
        try {
            if ('wakeLock' in navigator) {
                wakeLock = await navigator.wakeLock.request('screen');
                console.log('🔋 Wake lock activated - screen will stay on');
                
                wakeLock.addEventListener('release', () => {
                    console.log('🔋 Wake lock released');
                });
            }
        } catch (err) {
            console.log('❌ Wake lock failed:', err);
        }
    }

    // Release wake lock when needed
    function releaseWakeLock() {
        if (wakeLock !== null) {
            wakeLock.release();
            wakeLock = null;
        }
    }

    // Initialize kiosk features on load
    window.addEventListener('load', () => {
        // Enable fullscreen for kiosk mode
        enableAutoFullscreen();
        
        // Keep screen awake
        requestWakeLock();
        
        // Re-request wake lock when visibility changes
        document.addEventListener('visibilitychange', () => {
            if (wakeLock !== null && document.visibilityState === 'visible') {
                requestWakeLock();
            }
        });
    });

    // PWA Install Prompt
    let deferredPrompt;
    
    window.addEventListener('beforeinstallprompt', (e) => {
        console.log('💾 PWA install prompt available');
        e.preventDefault();
        deferredPrompt = e;
        
        // Show custom install button if needed
        showInstallButton();
    });

    function showInstallButton() {
        // You can add a custom install button here
        // For kiosk mode, this might not be necessary
        console.log('💾 PWA can be installed');
    }

    // Handle successful PWA installation
    window.addEventListener('appinstalled', (evt) => {
        console.log('✅ PWA successfully installed');
        // Hide install button if visible
    });

    // Touch and gesture optimizations for tablets
    function optimizeForTouch() {
        // Prevent double-tap zoom
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function (event) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
        
        // Phishing buton yazılarını garantile - ESKİ KOD GİBİ ORTADA
        setTimeout(() => {
            const phishingTexts = document.querySelectorAll('.phishing-button div');
            phishingTexts.forEach(textDiv => {
                // ESKİ KODDA OLDUĞU GİBİ ORTADA KONUMLANDIRMA
                textDiv.style.setProperty('position', 'absolute', 'important');
                textDiv.style.setProperty('top', '50%', 'important');
                textDiv.style.setProperty('left', '50%', 'important');
                textDiv.style.setProperty('transform', 'translate(-50%, -50%)', 'important');
                textDiv.style.setProperty('color', 'white', 'important');
                textDiv.style.setProperty('font-family', 'Gilmer Light, sans-serif', 'important');
                textDiv.style.setProperty('font-size', '1rem', 'important');
                textDiv.style.setProperty('text-align', 'center', 'important');
                textDiv.style.setProperty('width', '90%', 'important');
                textDiv.style.setProperty('line-height', '1.2', 'important');
                
                // TÜM EFEKTLERİ KALDIR
                textDiv.style.setProperty('background', 'none', 'important');
                textDiv.style.setProperty('padding', '0', 'important');
                textDiv.style.setProperty('margin', '0', 'important');
                textDiv.style.setProperty('border', 'none', 'important');
                textDiv.style.setProperty('border-radius', '0', 'important');
                textDiv.style.setProperty('box-shadow', 'none', 'important');
                textDiv.style.setProperty('text-shadow', 'none', 'important');
                textDiv.style.setProperty('font-weight', 'normal', 'important');
                textDiv.style.setProperty('transition', 'none', 'important');
                console.log('🎯 Phishing yazı ESKİ KOD GİBİ ORTADA:', textDiv.textContent);
            });
            
            // Butonlardaki transition efektini de kaldır
            const phishingButtons = document.querySelectorAll('.phishing-button');
            phishingButtons.forEach(button => {
                button.style.setProperty('transition', 'none', 'important');
                button.style.setProperty('transform', 'none', 'important');
                console.log('🚫 Buton transition kaldırıldı');
            });
            
            // Buton yüksekliklerini eski koda göre ayarla
            const phishingButtonImages = document.querySelectorAll('.phishing-button img');
            phishingButtonImages.forEach(img => {
                img.style.setProperty('min-height', '60px', 'important'); // Eski kodda 60px
                img.style.setProperty('transition', 'none', 'important');
                console.log('📏 Phishing buton yüksekliği eski koda göre ayarlandı');
            });
        }, 1000);

        // Prevent pinch zoom
        document.addEventListener('touchmove', function (event) {
            if (event.scale !== 1) {
                event.preventDefault();
            }
        }, { passive: false });

        // Add touch feedback to buttons
        const buttons = document.querySelectorAll('.main-btn-svg, .password-check-btn, .share-button, .phishing-button');
        buttons.forEach(button => {
            button.addEventListener('touchstart', function() {
                this.style.transform = 'scale(0.95)';
            });
            
            button.addEventListener('touchend', function() {
                this.style.transform = '';
            });
        });
    }

    // Initialize touch optimizations
    if ('ontouchstart' in window) {
        optimizeForTouch();
    }
    
    // Mobilde parola kontrol butonunu her zaman görünür ve aktif yap
    function ensurePasswordButtonVisible() {
        const isMobile = window.innerWidth <= 767;
        if (isMobile) {
            const checkBtn = document.getElementById('check-password-btn');
            const checkBtnWrapper = document.getElementById('password-check-btn-wrapper');
            
            if (checkBtn) {
                checkBtn.style.opacity = '1';
                checkBtn.style.pointerEvents = 'auto';
                checkBtn.style.display = 'block';
                checkBtn.style.visibility = 'visible';
                checkBtn.style.cursor = 'pointer';
            }
            
            if (checkBtnWrapper) {
                checkBtnWrapper.style.display = 'flex';
                checkBtnWrapper.style.visibility = 'visible';
                checkBtnWrapper.style.opacity = '1';
                checkBtnWrapper.style.pointerEvents = 'auto';
                checkBtnWrapper.style.position = 'relative';
                checkBtnWrapper.style.zIndex = '2';
            }
        }
    }
    
    // Sayfa yüklendiğinde ve resize edildiğinde kontrol et
    document.addEventListener('DOMContentLoaded', ensurePasswordButtonVisible);
    window.addEventListener('resize', ensurePasswordButtonVisible);
    
    // Parola paneli açıldığında da kontrol et
    setTimeout(ensurePasswordButtonVisible, 500);
    setInterval(ensurePasswordButtonVisible, 2000);

    </script>
</body>
</html> 